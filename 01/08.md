| ✍️ Tangxt | ⏳ 2020-07-19 | 🏷️ MVC、双向绑定 |

# 08-MVC与双向绑定

## ★双向绑定

1）起源

说到前端框架，就总会谈论到什么「双向绑定」和「单向绑定」这些概念了。

但是要理解这些概览，最好还是从其最原始的形态入手，也就是自己搞出双向绑定和单向绑定。

这就要说到 MVC 了。

2010 年，Backbone.js 第一版发布，三年后在腾讯工作的方方才开始用这么个东西。由此可以看出**英文世界的前端知识一直都是领先于其他语言的**。

有人说 Backbone.js 是基于 MVC 思想的，也有人说 Backbone.js 是基于 MVP 思想的，方方在这里不打算给大家明确的答案，因为不管是 MVC 还是 MVP，都是类似的。今天方方会从**需求的角度**来引导大家理解 MVX（X 可以是任何东西）思路。

2）意大利面条式的代码

形容你写的代码是「**意大利面条式的**」，这个形容称呼最早来自2010 年，Backbone.js 第一版发布 -> 你们不使用 Backbone.js 这个框架写出来的代码就是TM的「意大利面条式的」

意大利面条式代码长啥样的？

![Spaghetti code](assets/img/2020-07-20-01-09-40.png)

> 代码长长短短，还互相交织，你中有我，我中有你，错综复杂 -> Spaghetti code

简单来说，如果人家看你的代码感到很累的话，如看一下第15行的函数，其中这个函数的逻辑需要看很多处的代码，如第8行，第26行等等，那么你的代码就有「意大利面条式的」嫌疑…… -> 说白了，**代码整体上看咩有结构**

还有就是，你第一天写完了这个代码，看起来是很容易理解的，然而过了一个星期之后，你打算修改第一天的代码，你发现你自己完全看不懂或者很难看懂当初在第一天写的那个代码了！ -> 从时间角度上看，这也有「意大利面条式的」嫌疑 -> **时间久了之后，代码极难维护**

例子1：

demo：<https://jsbin.com/jojorul/edit?output>

<a class="jsbin-embed" href="https://jsbin.com/jojorul/embed?output">JS Bin on jsbin.com</a><script src="https://static.jsbin.com/js/embed.min.js?4.1.8"></script>

![例子1](assets/img/2020-07-20-09-58-25.png)

3）一些程序员想出了解决办法

一些程序员通过自己的总结，发现这些代码总是可以分成三类：

1. 专门操作远程数据的代码（fetchDb 和 saveDb 等等）
2. 专门呈现页面元素的代码（innerHTML 等等）
3. 其他控制逻辑的代码（点击某按钮之后做啥的代码）

为什么分成这三类呢？因为我们前端抄袭了后端的分类思想，后端代码也经常分为三类：

1. 专门操作 MySQL 数据库的代码
2. 专门渲染 HTML 的代码
3. 其他控制逻辑的代码（用户请求首页之后去读数据库，然后渲染 HTML 作为响应等等）

> 后端的MVC思想来自于「三层架构」（**视图层View、服务层Service、持久层Dao，分别完成不同的功能**）

这些思路经过慢慢的演化，最终被广大程序员完善为 MVC 思想。

1. M 专门负责数据
2. V 专门负责表现
3. C 负责其他逻辑

如果我们来反思一下，会发现这个分类是无懈可击的：

1. 每个网页都有数据
2. 每个网页都有表现（具体为 HTML）
3. 每个网页都有其他逻辑

于是乎，MVC 成了经久不衰的设计模式（**设计模式就是「套路」的意思**）






