### âœï¸ Tangxt â³ 2020-08-27 ğŸ·ï¸ Money ç»„ä»¶

# Money.vue ç»„ä»¶ï¼ˆä¸‹ï¼‰

## â˜…JS ç»„ä»¶

> å…ˆç”¨ JS çš„å§¿åŠ¿æ¥å†™ï¼Œå†™å®Œåå†æ”¹å†™æˆ TS å§¿åŠ¿çš„ï¼

1ï¼‰ã€Œæ”¶å…¥ã€&ã€Œæ”¯å‡ºã€ç±»å‹åˆ‡æ¢ç»„ä»¶

åˆšå¼€å§‹æï¼Œå°±æ¥æ•´ä¸ªæœ€ç®€å•çš„ï¼

åœ¨å•æ–‡ä»¶ç»„ä»¶é‡Œè¾¹ï¼Œå†™ JS åŒºåŸŸçš„æ¨¡æ¿ï¼š

``` html
<script>
  export default { data, props, methods, created, /**...**/ }
</script>

<!-- <=> -->

<script lang="js">
  export default { data, props, methods, created, /**...**/ }
</script>
```

> ä½ ä¸å†™`lang="js"`ï¼Œé»˜è®¤å°±æ˜¯ `lang="js"`ï¼

æ€è·¯ï¼š

1. å®šä¹‰è¿™ä¸ªåˆ‡æ¢ç»„ä»¶çš„çŠ¶æ€ï¼š`type`ä¸º`'+'/'-'`åˆ™è¡¨ç¤ºç»„ä»¶ä¸ºã€Œæ”¶å…¥/æ”¯å‡ºã€çŠ¶æ€ -> å®šä¹‰ç»„ä»¶çŠ¶æ€ç”¨ `data`
2. åœ¨`template`é‡Œè¾¹ä»£è¡¨ã€Œæ”¯å‡ºã€å’Œã€Œæ”¶å…¥ã€çš„è¿™ä¿©å…ƒç´ ï¼Œæ­¤æ—¶ `type` ä¸ºä½•å€¼ï¼Œé‚£ä¹ˆç›¸å¯¹åº”çš„è°å°±æœ‰ä¸‹åˆ’çº¿ï¼Œä¹Ÿå°±æ˜¯è°ä¼šæœ‰ `selected` è¿™ä¸ª class
3. ç»„ä»¶çŠ¶æ€çš„æ”¹å˜ -> `click` å…ƒç´ 

ä»£ç ï¼š[Demo](https://github.com/ppambler/vue-morney/commit/8425cd2198778b2a1dddbb2a629e234a499820ba)

2ï¼‰ä»£ç åˆ†æ

`:class="type === '-' && 'selected'"`ï¼š

![å’©æœ‰ä¸€ä¸ªå« false çš„ class](assets/img/2020-08-30-19-28-59.png)

vue åœ¨èƒŒååšäº†å¾ˆå¤šäº‹æƒ…ï¼Œå¦‚æœ `&&` è¡¨è¾¾å¼è¿”å›äº† `false`ï¼Œé‚£ä¹ˆ vue å°±ä¼šè‡ªåŠ¨æŠŠè¿™ä¸ª `false` å€¼ç»™å»æ‰ï¼Œæ¯•ç«Ÿ class æ˜¯ `false` æœªå…ä¹Ÿæ˜¾å¾—å¿’å¥‡æ€ªäº†å§ï¼ -> æ€»ä¹‹ï¼Œè¿™æ˜¯ä¸€ç§**ç®€å†™çš„å†™æ³•**ï¼æ­£å¸¸å†™æ³•åº”è¯¥æ˜¯æ•´ä¸ªä¸‰ç›®è¿ç®—â€¦â€¦

`@click="selectType('-')"`ï¼š

è¿™è¿˜æœ‰ä¸€ç§å†™æ³•ï¼Œé‚£å°±æ˜¯ç›´æ¥ `type = '-'`å°±å¯ä»¥äº†ï¼Œä½†æ˜¯è¿™ç§å†™æ³•**åªèƒ½å†™ä¸€è¡Œä»£ç **ï¼Œæ‰€ä»¥è¿™å°±æ˜¾å¾—å¾ˆé¸¡è‚‹äº†ï¼è€Œæ–¹æ³•è°ƒç”¨åˆ™å¯ä»¥**å†™å¤šè¡Œä»£ç **ï¼

è¯¥ã€Œåˆ‡æ¢ç»„ä»¶ï¼ˆ`Types`ï¼‰ã€æ¥æ”¶å¤–è¾¹ä¼ è¿‡æ¥çš„å€¼ï¼š

é€è¿‡ `props` è¿™ä¸ª options API å°±å¯ä»¥åšåˆ°ï¼ -> æ‹¿åˆ°ä¼ è¿‡æ¥çš„å€¼ï¼Œä¸€èˆ¬æ‰”åˆ° `mounted` é‡Œè¾¹ä½¿ç”¨ï¼

![å¦‚ä½•çœ‹ `props`ï¼Ÿ](assets/img/2020-08-30-19-50-39.png)

---

æ¥ä¸‹æ¥çœ‹çœ‹å¦‚ä½•æŠŠä¸Šè¾¹çš„ JS ä»£ç ï¼Œæ”¹æˆæ˜¯ TS å§¿åŠ¿çš„ï¼

## â˜…TS ç»„ä»¶

> å®ç°ç¬¬ä¸€ä¸ª TS Vue ç»„ä»¶

![å¦‚ä½•å†™ä¸€ä¸ª TS ç»„ä»¶ï¼Ÿ](assets/img/2020-08-31-13-56-10.png)

1ï¼‰TS ç»„ä»¶ vs JS ç»„ä»¶

å®ƒä»¬ä¿©æœ€å¤§çš„ä¸åŒï¼š

TS ç»„ä»¶ä¸ç”¨æ„é€ é€‰é¡¹ -> ä¸ºå•¥ä¸ç”¨ï¼Ÿ -> å› ä¸ºæ„é€ é€‰é¡¹æ˜¯æ²¡æœ‰ç±»å‹çš„ï¼Œè€Œä¸”å¯ä»¥éšä¾¿åŠ ä¸œè¥¿ï¼

å†™ TS ç»„ä»¶å¿…é¡»è¦ç”¨ `Class` -> è¿™æ˜¯ Vue è§„å®šçš„ï¼

2ï¼‰å¦‚ä½•å†™ä¸€ä¸ª TS ç»„ä»¶ï¼Ÿ

1. ä¸º `<script>` æ·»åŠ  `lang="ts"`
2. å¯¼å‡ºä¸€ä¸ª `class`ï¼Œè€Œä¸”è¯¥ `class` ç»§æ‰¿ `Vue` -> è¿™æ˜¯è§„å®š
3. åœ¨ `class` é‡Œè¾¹å®šä¹‰å®ä¾‹çš„è‡ªæœ‰å±æ€§ -> å°±æ˜¯åœ¨å¹² `data` çš„æ´»å„¿
4. åœ¨ `class` é‡Œè¾¹å®šä¹‰å®ä¾‹çš„æ–¹æ³• -> å°±æ˜¯åœ¨å¹² `methods` çš„æ´»å„¿
5. å®‰è£…`vue-property-decorator`ï¼š`npm i -S vue-property-decorator` -> åœ¨å®‰è£…`vue-property-decorator`çš„è¿‡ç¨‹ä¸­ï¼Œè¿å¸¦ç€`vue-class-component`ä¹Ÿä¸€èµ·å®‰è£…äº†ï¼
6. æ·»åŠ è£…é¥°å™¨ `@Component` -> æœ‰äº†å®ƒï¼Œå°±å¯ä»¥æŠŠã€Œè‡ªæœ‰å±æ€§+å®ä¾‹æ–¹æ³•ã€è‡ªåŠ¨å¤„ç†æˆã€Œ`data`+`methods`ã€äº† -> æ²¡æœ‰å®ƒï¼Œé‚£å°±ä¸å¸®ä½ å¤„ç†äº†ï¼ -> **æ€»ä¹‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„å¸®æˆ‘ä»¬å¤„ç†ä»£ç çš„ä¸œè¥¿**
7. ä¸º JS ä»£ç åŠ ç±»å‹ -> ä½ ç”¨ webstormï¼Œå¦‚æœä»£ç å‡ºç°çˆ†çº¢ï¼Œé‚£ä¹ˆä½ å°±å¾—æŠŠå®ƒå»å¤„ç†æˆä¸çˆ†çº¢çš„çŠ¶æ€ï¼ å¦‚ï¼šä¸ºå½¢å‚åŠ ç±»å‹ `selectType(type: string) {}`ï¼ˆæ˜¯å°å†™çš„`string`ï¼Œå¯ä¸æ˜¯å¤§å†™çš„`String`ï¼‰

> å¦‚ä½•æ·»åŠ ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Ÿ -> ç›´æ¥ `created() {}` å°±è¡Œäº†ï¼

ä»£ç ï¼š

![ä»£ç ](assets/img/2020-08-31-17-17-06.png)

3ï¼‰vue-property-decorator

æ–‡æ¡£ï¼š[kaorun343/vue-property-decorator: Vue.js and Property Decorator](https://github.com/kaorun343/vue-property-decorator)

è¿™ä¸ªåŒ…ä¸æ˜¯å°¤é›¨æºªå†™çš„ï¼Œè¯è¯´ï¼Œä¸ºå•¥ä¸ç”¨å°¤é›¨æºªçš„å‘¢ï¼Ÿ -> å› ä¸ºå°¤é›¨æºªå†™çš„æ²¡æœ‰è¿™ä¸ªäººå†™çš„å¥½ï¼

å°¤é›¨æºªå†™çš„æ˜¯è¿™ä¸ªï¼š[vuejs/vue-class-component: ES / TypeScript decorator for class-style Vue components.](https://github.com/vuejs/vue-class-component) -> è¿™æ˜¯ Vue å®˜æ–¹æä¾›çš„ TS æ”¯æŒåº“ï¼ä½†å…¶åŠŸèƒ½ä¸å¦‚ `vue-property-decorator` å¥½ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ç”¨äº†è¿™ä¸ª `vue-property-decorator`ï¼

`vue-property-decorator` æä¾›äº†å¥½å‡ ä¸ªè£…é¥°å™¨ï¼ˆ`@`å¼€å¤´çš„ï¼‰ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬ç”¨çš„è¿™ä¸ª `@Component` æ˜¯ Vue å®˜æ–¹æä¾›çš„ï¼æ‰€ä»¥ï¼Œå¦‚æœä½ è¦çœ‹ `@Component` çš„å®˜æ–¹æ–‡æ¡£ï¼Œé‚£å°±å¾—çœ‹ `vue-class-component` çš„ï¼

é€è¿‡ CRM å­¦ä¹ æ³•æ¥äº†è§£ `@Component` çš„ä½¿ç”¨ï¼š

> æ–‡æ¡£ï¼š[Overview - Vue Class Component](https://class-component.vuejs.org/)

![vue-class-component ä½¿ç”¨å§¿åŠ¿](assets/img/2020-08-31-14-27-22.png)

> CRM å­¦ä¹ æ³•ï¼Œè®©ä½ å¯ä»¥ä¸ç”¨æ·±ç©¶æ‰€æœ‰çš„äº‹æƒ…ï¼Œ**èŠ‚çœå¤§é‡çš„æ—¶é—´**ï¼å½“ç„¶ï¼Œä½ çš„ JS åŸºç¡€å¾—æ‰å®æ‰è¡Œï¼ -> ã€Œ`class` è¯­æ³•ã€ æ— éå°±æ˜¯æŠŠ ã€ŒJS å¯¹è±¡å†™æ³•ã€ æ¢æˆæ˜¯å¦ä¸€ç§å†™æ³•ç½¢äº†ï¼æ‰€ä»¥ï¼Œå¦‚æœä½ æ—¶é—´æœ‰é™çš„è¯ï¼Œå…¶å®å¯ä»¥æ”¾å¼ƒæ·±ç©¶ `class` çš„è¯­æ³•ç»†èŠ‚ï¼Œä»¥åŠ è£…é¥°å™¨çš„ç”¨æ³•ï¼ç›´æ¥ä¾è‘«èŠ¦ç”»ç“¢å°±è¡Œäº†ï¼Œåæ­£ä½ å·²ç»çŸ¥é“è¿™ç§å†™æ³•çš„èƒŒååˆ°åº•åšäº†ä»€ä¹ˆâ€¦â€¦

## â˜…TS ç»„ä»¶ @Prop è£…é¥°å™¨

1ï¼‰å¦‚ä½•å†™ propsï¼Ÿ

![props](assets/img/2020-08-31-18-14-45.png)

Vetur æç¤ºè¯´ `Property 'xxx' does not exist on type 'Types'`ï¼ˆ`xxx`ä¸å­˜åœ¨äº`Types`è¿™ä¸ª`class`é‡Œè¾¹ï¼ï¼‰

å¯ä»¥çœ‹åˆ°å®˜æ–¹æ–‡æ¡£ç¿»è½¦äº†â€¦â€¦ï¼ˆæˆ–è®¸è¿™æ˜¯æ’ä»¶çš„ç¼˜æ•…ï¼æ¯•ç«Ÿæ•ˆæœå·²ç»å‡ºæ¥äº†ï¼Œåªæ˜¯æ’ä»¶æ£€æµ‹è¯´è¿™æœ‰é—®é¢˜ç½¢äº†ï¼ï¼‰

ä»£ç ï¼š[Demo](https://github.com/ppambler/vue-morney/commit/f17179b32b6a7cf40bee969d474467d6f3858f56)

2ï¼‰ç”¨ @Prop æ¥å†™ props

![@Prop](assets/img/2020-08-31-18-43-17.png)

ä½ åœ¨çˆ¶ç»„ä»¶é‡Œè¾¹æ˜¯é€è¿‡ `xxx="Money pass data"` æ¥ä¼ å€¼çš„ï¼Œä½†è¿™æ ·çš„å†™æ³•åªèƒ½è¡¨ç¤ºè¿™æ˜¯åœ¨ä¼ å­—ç¬¦ä¸²ï¼Œå› æ­¤ Vue æŠ¥äº†è¿™æ ·çš„é”™è¯¯ï¼š

![ä¼ å­—ç¬¦ä¸²](assets/img/2020-08-31-18-46-11.png)

> å³ä¾¿ä¼ çš„å€¼ä¸ç¬¦åˆç±»å‹ï¼Œä½†æœ€ç»ˆçš„è¿è¡Œç»“æœè¿˜æ˜¯å‡ºæ¥äº†ï¼ -> Vue çš„å®¹é”™æ€§å¤„ç†ï¼

æ‰€ä»¥ä½ å¾—è¿™æ ·æ¥ï¼š`:xxx="666"`ï¼ˆåŠ ä¸€ä¸ª`:`ï¼Œæ„å‘³ç€å±æ€§å€¼æ˜¯ JS ä»£ç ï¼‰

ä»£ç ï¼š[Demo](https://github.com/ppambler/vue-morney/commit/354969b5caf71a3720b35e23559447c484009864)

3ï¼‰ä»£ç è§£æ

`@Prop(Number) xxx: number | undefined;`ï¼š

è¿™è¡Œä»£ç åœ¨å¹²å˜›ï¼Ÿä¸ºå•¥å†™äº†ä¸€ä¸ªå¤§å†™çš„ `Number` è¿˜å¾—å†å†™ä¸€ä¸ªå°å†™çš„`number`ï¼Ÿ

`number | undefined` -> æ˜¯ç¼–è¯‘æ—¶çš„æ£€æŸ¥ï¼ -> åœ¨ä½ è¿˜æœªè¿è¡Œä»£ç çš„æ—¶å€™å°±èƒ½å‘Šè¯‰ä½ çš„ä»£ç æ˜¯å¦æœ‰é—®é¢˜

å¦‚ï¼š

![TS ä»£ç æ£€æŸ¥](assets/img/2020-08-31-19-01-22.png)

é€è¿‡ä»£ç æ£€æŸ¥ï¼Œä½ å°±æ˜ç™½è‡ªå·±è¿™æ ·å†™æ˜¯æœ‰æ½œåœ¨çš„ bug çš„ï¼ -> æ‰€ä»¥æˆ‘å¾—æ¢ä¸€ç§å†™æ³•ï¼Œå¦‚å…ˆåˆ¤æ–­ä¸€ä¸‹ `this.xxx` æ˜¯å¦ç­‰äº `undefined`ï¼Œå¦‚æœä¸ç­‰äºé‚£å°±è¯æ˜ `this.xxx` æ˜¯ä¸ª `Number` ç±»å‹çš„å€¼â€¦â€¦

å›è¿‡å¤´æ¥ï¼Œæ•´ä½“çœ‹ä¸€ä¸‹ `@Prop(Number) xxx: number | undefined;` è¿™è¡Œä»£ç ï¼š

- `@Prop`æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œå‘Šè¯‰ Vueï¼šã€Œåè¾¹çš„è¿™ä¸ª `xxx` å±æ€§æ˜¯ä¸ª `prop`ï¼Œè€Œä¸æ˜¯ `data`ã€ -> **ä¸å†™ `@Prop` å°±æ˜¯ `data`ï¼Œå†™äº† `@Prop` å°±æ˜¯ `prop`**
- `Number` -> å‘Šè¯‰ Vue `xxx` **è¿è¡Œæ—¶**æ˜¯ä¸ª `Number`ï¼Œå¦‚æœä¸æ˜¯ `Number` ç±»å‹çš„å€¼ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šæŠ¥é”™ï¼
- `xxx` -> å±æ€§å
- `number | undefined` -> å‘Šè¯‰ TS `xxx` çš„**ç¼–è¯‘æ—¶**ç±»å‹ -> æ³¨æ„ï¼Œä½ ä¸å†™è¿™ä¸ª`undefined`æ˜¯ä¼šæŠ¥ã€Œ`Property 'xxx' has no initializer and is not definitely assigned in the constructor`ã€è¿™æ ·çš„é”™è¯¯çš„ï¼ï¼ˆè”åˆç±»å‹é€šå¸¸ä¸ `null` æˆ– `undefined` ä¸€èµ·ä½¿ç”¨ï¼Œç»™äº†ä¸€ä¸ª `undefined` ç±»å‹ï¼Œ å°±æ˜¯åœ¨å‘Šè¯‰ TS `xxx` çš„åˆå§‹å€¼ä¸º `undefined`ï¼‰

è¯è¯´ï¼Œä¸ºå•¥`Number`æ˜¯å¤§å†™ï¼Œè€Œ`number` æ˜¯å°å†™å‘¢ï¼Ÿéš¾é“ä¸åº”è¯¥éƒ½æ˜¯å°å†™çš„å—ï¼Ÿ

Vue ä½œè€…ä¹Ÿæƒ³æŠŠ `Number` æ”¹æˆæ˜¯å°å†™çš„ï¼Œä½†å› ä¸ºæŸç§åŸå› ï¼ˆåŒºåˆ†è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶ï¼‰å°±æ”¾å¼ƒäº†ï¼

![Number vs number](assets/img/2020-08-31-19-38-48.png)

è¡¥å……ä¸€ç‚¹ï¼š

ä½ ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š`@Prop(Number) xxx: number = 0;`ï¼ˆé»˜è®¤ç»™`xxx`ä¸€ä¸ª`0`çš„é»˜è®¤å€¼ï¼‰ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨æ£€æŸ¥ `xxx` æ˜¯å¦ä¸º `undefined`äº†ï¼Œåä¹‹ï¼Œç”¨åŸå…ˆçš„å§¿åŠ¿ä½ å°±å¾—å¤„å¤„æ£€æŸ¥`this.xxx`æ˜¯å¦ä¸º`undefined` -> æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ç»™ä¸Šåˆå§‹å€¼ï¼Œç»“æœæŠ¥äº†è¿™æ ·çš„é”™è¯¯ï¼š

![ç»™ prop åˆå§‹å€¼çš„ bug](assets/img/2020-08-31-20-04-37.png)

`@Prop(Number) xxx: number | undefined;`è¿™ç§å§¿åŠ¿ï¼Œåº”è¯¥æ˜¯åœ¨å‘Šè¯‰ TS è¿™ä¸ª`xxx`æ˜¯æ²¡æœ‰åˆå§‹å€¼çš„ï¼ï¼ˆç–‘é—® ğŸ¤” ï¼‰ -> å¦‚æœçˆ¶ç»„ä»¶ä¸ä¼ `xxx`ï¼Œé‚£ä¹ˆ`this.xxx`å°±æ˜¯`undefined`å€¼äº†ï¼è¿™éš¾é“ä¸å°±æ˜¯åœ¨è¯´åˆå§‹åŒ–å€¼æ˜¯`undefined`å—ï¼Ÿ

4ï¼‰æˆ‘ä»¬ç”¨ TS å†™ä»£ç å¥½è¿˜æ˜¯ä¸å¥½ï¼Ÿ

- å¯¹ä»£ç **æ²¡è¿½æ±‚çš„**å‰ç«¯ -> å†™ TS å°±æ˜¯åœ¨æ‰“æ‰°ä»–ä»¬
- å¯¹ä»£ç **æœ‰è¿½æ±‚çš„**å‰ç«¯ -> è¿™ä¸œè¥¿ç‰›é€¼å‘€ï¼æˆ‘ä»¥å‰æ²¡æœ‰æ³¨æ„åˆ°çš„é”™è¯¯ï¼Œå®ƒéƒ½å‘Šè¯‰æˆ‘äº†ï¼

ç»™æˆ‘å·¥èµ„ 3kï¼Ÿ -> æˆ‘æ˜¯ä¸ªæ²¡è¿½æ±‚çš„å‰ç«¯ï¼Œæ‰€ä»¥æˆ‘çš„ä»£ç éƒ½ç”¨ JS æ¥å†™ -> æŠŠ `lang="ts"` åˆ äº† + å»æ‰æ‰€æœ‰çš„ `: type1 | type2` -> çå†™â€¦â€¦ï¼ˆwebstorm æœ‰æ™ºèƒ½çš„ç¼–è¯‘æ—¶å¼±æç¤ºï¼Œè€Œ vscode åˆ™æ²¡æœ‰ï¼Œåªèƒ½å½“ä»£ç åœ¨æµè§ˆå™¨é‡Œè¾¹è·‘èµ·æ¥äº†æ‰çŸ¥æ™“ï¼ï¼‰

ç»™æˆ‘å·¥èµ„ 10kï¼Ÿ -> é‚£æˆ‘å°±æ˜¯ä¸ªæœ‰è¿½æ±‚çš„å‰ç«¯ï¼Œå› æ­¤æˆ‘çš„ä»£ç åº”è¯¥ç”¨ TS æ¥å†™ï¼

5ï¼‰TS ç±»å‹æ·»åŠ åŸåˆ™

1. ä½ è¿™æ · `type = '-'` å†™äº†ï¼Œé‚£ä¹ˆå°±ä¸ç”¨è¿™æ ·å†™äº†ï¼š `type: string = '-'`ï¼ŒTS ä¼šè‡ªå·±æ¨å¯¼
2. å‡½æ•°çš„è¿”å›å€¼ç±»å‹å£°æ˜ä¸ç”¨å†™ï¼Œå³ä¸ç”¨ `string selectType(){}` è¿™æ ·å†™
3. å‡½æ•°çš„å½¢å‚éœ€è¦å†™ä¸Šç±»å‹å£°æ˜
4. `@Prop(Number) xxx`éœ€è¦å†™ä¸Šç±»å‹å£°æ˜ -> `@Prop(Number) xxx: number | undefined;`

6ï¼‰æ€æ ·ç†è§£è¿™ä¸ªä»£ç ï¼Ÿ

``` js
this.xxx.yyy
```

`this.xxx`ä¸è¿‡å…³ï¼Œå®ƒå¯èƒ½æ˜¯ `undefined`ï¼Œ`this.xxx.yyy`ä¸è¿‡å…³ï¼Œå› ä¸ºå·²çŸ¥`this.xxx`æ˜¯`number`ç±»å‹ï¼Œæ‰€ä»¥å®ƒæ˜¯å’©æœ‰`yyy`è¿™ä¸ªæ–¹æ³•çš„

ä»£ç æ”¹å†™ï¼š

``` js
if(this.xxx === undefined) {
  console.log('xxx is undefined')
} else {
  // xxx ä¸€å®šä¼šæœ‰ toString è¿™ä¸ªæ–¹æ³•ï¼
  console.log(thix.xxx.toString())
}
```

7ï¼‰å†™ TS çš„ 3 ä¸ªå¥½å¤„ï¼Ÿ

1. ç±»å‹æç¤ºï¼šæ›´æ™ºèƒ½çš„æç¤º -> è‡ªåŠ¨æç¤º
2. ç¼–è¯‘æ—¶æŠ¥é”™ï¼šè¿˜æ²¡è¿è¡Œä»£ç å°±çŸ¥é“è‡ªå·±å†™é”™äº† -> ä¸¥è°¨
3. ç±»å‹æ£€æŸ¥ï¼šæ— æ³•ç‚¹å‡ºé”™è¯¯çš„å±æ€§ï¼Œå¦‚ä½ ä¸èƒ½éšä¾¿å†™ `this.xxx.yyy`

> åœ¨ Vue çš„ `template` é‡Œå†™çš„ JS ä»£ç ï¼ŒTS æ˜¯ä¸ä¼šå»æ£€æŸ¥çš„ï¼

8ï¼‰å…¶å®ƒè£…é¥°å™¨çš„ç”¨æ³•ï¼Ÿ

è‡ªå·±çœ‹ [æ–‡æ¡£](https://github.com/kaorun343/vue-property-decorator#Prop) -> CRM å­¦ä¹ æ³•ï¼ -> **å§‹ç»ˆè°¨è®°ã€Œå†™æ³•å½¢å¼ä¸Šæœ‰æ‰€ä¸åŒï¼Œä¸éœ€æ·±ç©¶ï¼Œä¾è‘«èŠ¦ç”»ç“¢ç›´æ¥ç”¨å³å¯ï¼ã€**

9ï¼‰å°ç»“

1. å®˜æ–¹çš„ `props` ä¸è¡Œï¼Œå°±ç”¨äº†ç¬¬ä¸‰æ–¹çš„ `@Prop`
2. ææ¸…æ¥šè¿™è¡Œ `@Prop(Number) xxx: number | undefined;` ä»£ç é‡Œè¾¹çš„ `Number` å’Œ `number` å„è‡ªä»£è¡¨ä»€ä¹ˆæ„æ€ï¼ -> å®ƒä»¬çš„é”™è¯¯å±•ç¤ºæ˜¯è¿™æ ·çš„ï¼šæµè§ˆå™¨æ§åˆ¶å° Errorï¼ˆè¿è¡Œæ—¶ï¼‰ vs ç»ˆç«¯ Errorï¼ˆç¼–è¯‘æ—¶ï¼‰

----

## â˜…TS çš„æœ¬è´¨

1ï¼‰TS çœŸå¾—å¾ˆéš¾å—ï¼Ÿ

TS çš„æœ¬è´¨ï¼š

![TS](assets/img/2020-09-01-10-25-34.png)

- TS çš„ç±»å‹ -> åŠŸèƒ½æ˜¯ã€Œæ£€æµ‹ä½ å†™çš„ JS ä»£ç å¯¹ä¸å¯¹ã€ï¼Œå¦‚`this.xxx.yyy`ï¼ŒTS å‘ç°`this.xxx`å¯èƒ½æ˜¯`undefined`ï¼Œå°±ä¸è®©ä½ å†™`.yyy`äº† -> ä¸ºå•¥ä¸è®©å†™ï¼Ÿ -> å› ä¸ºè¿™ä»£ç åœ¨è¿è¡Œæ—¶è‚¯å®šä¼šæŠ¥é”™çš„å‘€ï¼ä½ æƒ³æƒ³ `undefined.yyy`ï¼Ÿ
- TS æ£€æŸ¥åˆ†ä¸¤ç§æƒ…å†µï¼ˆè¿˜æœ‰å…¶å®ƒæƒ…å†µï¼Œè¿™é‡Œä¸»è¦ç®€å•æä¸€ä¸‹ç±»å‹çš„å˜åŒ–ï¼‰ï¼š
  - æœ‰é”™ -> ç¼–è¯‘æŠ¥é”™ -> æ ¹æ®ã€Œçˆ†çº¢ã€çš„çº¿å»æ”¹ä½ çš„ JS ä»£ç 
  - æ²¡æœ‰é”™ -> æŠŠç±»å‹ç»™åˆ äº†ï¼Œä¿ç•™åªå«æœ‰ JS ä»£ç çš„é‚£éƒ¨åˆ†ä»£ç  -> ç±»å‹ç”¨å®Œå°±åˆ ï¼
- TS ->ç¼–è¯‘ -> JS -> babel -> æ›´ä½çº§çš„ JS
- è°åœ¨åšæ£€æŸ¥ï¼Ÿ -> tscï¼ˆæ˜¯ä¸€ä¸ªç¨‹åºï¼ŒåŠŸèƒ½æ˜¯ã€Œæ£€æŸ¥+ç¼–è¯‘ã€ï¼Œä½ åœ¨å®‰è£…`typescript`çš„æ—¶å€™ä¼šé¡ºå¸¦æŠŠè¿™ä¸ªå·¥å…·ç»™å®‰è£…ä¸Šï¼‰ -> å¯¹äº†ï¼Œbabel ä¹Ÿå¯ä»¥åšç¼–è¯‘è¿™ä»¶äº‹å„¿ï¼ -> äºŒè€…éƒ½å­˜åœ¨ç‹¬ç‰¹çš„åŠŸèƒ½ï¼
- ç¼–è¯‘æŠ¥é”™ï¼Œä¹Ÿèƒ½æ­£å¸¸è¿è¡Œç¼–è¯‘è¿‡åçš„ JS ä»£ç  -> ä¸ºå•¥ä¼šè¿™æ ·å‘¢ï¼Ÿå¦‚æœä½ æœ‰ä¸€ä»½æœ‰ 100 è¡Œä»£ç çš„ JS æ–‡ä»¶ï¼Œä½ ç›´æ¥æ”¹æˆæ˜¯ `.ts` åç¼€ï¼Œç»“æœç¼–è¯‘æŠ¥äº†å‡ åå¤„é”™è¯¯ï¼Œéš¾é“æˆ‘ä»¬è¦ä¸€è¡Œè¡Œæ”¹å—ï¼Ÿ -> ä¸éœ€è¦æ”¹ï¼Œä½ ç›´æ¥æ‰”åˆ°æµè§ˆå™¨é‡Œè·‘ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ï¼æ‰€ä»¥è¿™å°±æ˜¯ TS å®ƒç»™æˆ‘ä»¬çš„åŒ…å®¹æ€§â€¦â€¦

  ![ç¼–è¯‘æŠ¥é”™](assets/img/2020-09-01-13-21-09.png)

- å¯ä»¥çœ‹åˆ°ï¼ŒTS æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¸œè¥¿ï¼ -> åƒä¸‡ä¸è¦è®¤ä¸ºå®ƒæœ‰å¤šä¹ˆçš„éš¾ï¼

2ï¼‰å¦‚ä½•é…ç½®åªè¦æœ‰ç¼–è¯‘é”™è¯¯ï¼Œå°±æ— æ³•å¾—åˆ°ç¼–è¯‘å‡ºæ¥çš„ JS æ–‡ä»¶ï¼Ÿ

å®˜ç½‘å›ç­”è¯´ï¼š

åœ¨`tsconfig.json`çš„`"compilerOptions"`é…ç½®`"noEmitOnError": true`å°±è¡Œäº†ï¼

ä½†æµ‹è¯•å‘ç°ï¼Œè¿™é…ç½®æ˜¯æ— æ•ˆçš„ï¼ŒTS è¿˜æ˜¯å¯ä»¥æŠŠä»£ç  ç¼–è¯‘æˆ JS

å½“ç„¶ï¼Œæˆ‘ä»¬å¹¶ä¸å…³å¿ƒè¿™ä¸ªé—®é¢˜æ˜¯å¦èƒ½è§£å†³ï¼Œå› ä¸ºè¿™åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™æœ‰ç‚¹ç”»è›‡æ·»è¶³çš„æ„æ€äº†ï¼

3ï¼‰å°ç»“

- TS çš„æœ¬è´¨ï¼Œå°±æ˜¯åœ¨ JS ä¸Šå†™ä¸€äº› `: ç±»å‹`ï¼Œé€è¿‡ã€Œç±»å‹ã€ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥æˆ‘ä»¬çš„ JS ä»£ç æ˜¯å¦æœ‰é”™ï¼Œè€Œæ£€æŸ¥çš„å®¶ä¼™æ˜¯`tsc`è¿™ä¸ªç¨‹åºï¼š
  - `tsc`æ£€æŸ¥é€šè¿‡ï¼Œå°±ä¼šæŠŠ TS ä»£ç ç¿»è¯‘æˆ JS ä»£ç ï¼Œå…¶ä¸­ç¿»è¯‘è¿‡ç¨‹ä¸­æœ€é‡è¦çš„ä¸€æ­¥å°±æ˜¯æŠŠå«æœ‰`: ç±»å‹`è¿™æ ·çš„ä»£ç ç»™åˆ æ‰ï¼Œæ¯•ç«Ÿ JS æœ¬èº«æ˜¯ä¸æ”¯æŒ `: ç±»å‹` è¿™ç§è¯­æ³•çš„ï¼ï¼ˆç¿»è¯‘å‡ºæ¥çš„ JS ä»£ç æ˜¯å¦è¿˜éœ€è¦ Babel å¤„ç†å‘¢ï¼Ÿä¸ä¸€å®šéœ€è¦å‘€ï¼å¯èƒ½ `tsc` å°±å†…åµŒäº†ç±»ä¼¼ Babel è¿™æ ·çš„åŠŸèƒ½ï¼Œç„¶å`tsc`è‡ªèº«ä¹Ÿé¡ºä¾¿æŠŠ Babel çš„æ´»å„¿ç»™å¹²äº†ï¼‰
  - `tsc`æ£€æŸ¥æŠ¥é”™ï¼Œè¿˜æ˜¯å¯ä»¥æŠŠ TS ä»£ç ç¿»è¯‘æˆ JS ä»£ç ï¼Œå³ç›´æ¥æŠŠ `: ç±»å‹`è¿™æ ·çš„ä»£ç ç»™åˆ äº†å°±è¡Œäº† -> ä¸€ç§**å¦¥å**åšæ³•ï¼

---

æ¥ä¸‹æ¥ï¼Œå°±æ¥çœ‹çœ‹ç›®å‰å†™ Vue å•æ–‡ä»¶ç»„ä»¶çš„å‡ ç§å§¿åŠ¿ï¼

## â˜…Vue å•æ–‡ä»¶ç»„ä»¶çš„ä¸‰ç§å†™æ³•

> åªé’ˆå¯¹ã€ŒVue å•æ–‡ä»¶ç»„ä»¶ã€ï¼Œå¯ä¸æ˜¯ç›´æ¥çš„åœ¨æŸä¸ª `new Vue({})`é‡Œè¾¹æ³¨å†Œä¸€ä¸ª Vue ç»„ä»¶æˆ–è€…å…¨å±€æ³¨å†Œä¸€ä¸ª Vue ç»„ä»¶ï¼Œå› ä¸ºè¿™ç§å§¿åŠ¿å¿’ low äº†ï¼

1ï¼‰ç”¨ JS å¯¹è±¡

``` js
export default { data, props, methods, created, ...}
```

2ï¼‰ç”¨ TS ç±» `<script lang="ts">`

``` ts
 @Component
 export default class XXX extends Vue{
     xxx: string = 'hi';
     @Prop(Number) xxx: number|undefined;
 }
```

3ï¼‰ç”¨ JS ç±» `<script lang="js">`

``` js
 @Component
 export default class XXX extends Vue{
     xxx = 'hi'
 }
```

> JS ä¹Ÿå¯ä»¥ç”¨ `class` å§¿åŠ¿æ¥å†™å•æ–‡ä»¶ç»„ä»¶ï¼

4ï¼‰ç”¨å“ªä¸ªï¼Ÿ

ä¼˜å…ˆä½¿ç”¨æœ€éš¾çš„ TS å§¿åŠ¿ï¼ -> å› ä¸ºä½¿ç”¨æœ€éš¾çš„ï¼Œä¼šå­¦åˆ°æ›´å¤šçš„çŸ¥è¯†ï¼

æœ€ç®€å•çš„å§¿åŠ¿æ˜¯ç”¨ã€Œç”¨ JS å¯¹è±¡ã€

æ³¨æ„ï¼šä½ ä½¿ç”¨äº† `class` å§¿åŠ¿ï¼Œé‚£ä¹ˆä½ å°±å¾—å†™ä¸Š `@Component`ã€`extends Vue`

## â˜…numberPad æ¨¡å—

1ï¼‰åˆ›å»ºä¸€ä¸ªå†™ ts ä»£ç çš„æ¨¡æ¿

``` json
{
  "vue-ts": {
    "prefix": "!tts",
    "body": [
      "<script lang=\"ts\">",
      "import Vue from \"vue\";",
      "import { Component, Prop } from \"vue-property-decorator\";",
      "",
      "@Component",
      "export default class ${TM_FILENAME_BASE} extends Vue {",
      "}",
      "</script>"
    ],
    "description": "æ’å…¥ ts æ¨¡æ¿"
  }
}
```

2ï¼‰è¯¥æ¨¡å—çš„åŠŸèƒ½åˆ†æ

> çœ‹ windows ç³»ç»Ÿæä¾›çš„è®¡ç®—å™¨åŠŸèƒ½

ç”±äº TS æ˜¯éå¸¸é‡è§†æ•°æ®ç±»å‹çš„ï¼Œæ‰€ä»¥æ ¹æ®å®é™…æƒ…å†µåˆ†æï¼Œ `div.output` çš„å€¼æ˜¯ `string` ç±»å‹çš„ï¼š

![string](assets/img/2020-09-01-15-23-25.png)

3ï¼‰ä»£ç å®ç°

æ€è·¯ï¼š

- `numberPad`è¿™ä¸ªæ¨¡å—æ——ä¸‹æœ‰ä¿©ä¸œè¥¿ï¼š`output` & `buttons`ï¼Œç”¨æˆ·ç‚¹å‡»ä¸€ä¸ªä¸ª`button` å°±æ˜¯åœ¨ç»™`numberPad`ç»„ä»¶è¾“å…¥å†…å®¹ï¼Œç»™ç”¨æˆ·åé¦ˆçš„å°±æ˜¯é‚£ä¸ª `div.ouput`ï¼ˆå‘ˆç°ç»„ä»¶çŠ¶æ€å€¼çš„å®¹å™¨ï¼‰ å…ƒç´  -> è¯´ç™½äº†ï¼Œä½ è¦æ ¹æ®å½“å‰ç»„ä»¶`output`ï¼ˆç»„ä»¶çš„çŠ¶æ€ï¼‰çš„æƒ…å†µï¼Œæ¥å¤„ç†ç”¨æˆ·çš„è¾“å…¥ï¼Œå¤„ç†ä¹‹åå†è€ƒè™‘æ˜¯å¦æŠŠç»„ä»¶çš„çŠ¶æ€ç»™æ›´æ–°äº†ï¼ -> è°¨è®°ï¼šã€Œç”¨æˆ·å¯ä»¥ä¹±ç‚¹å‡»`button`ã€
- `output`æ¡†å‘ˆç°çš„å†…å®¹ï¼š
  - ä¸èƒ½å‡ºç°å¤šä¸ª `.`ï¼Œå¦‚`123.456.789`ã€`0..`â€¦â€¦
  - ä¸èƒ½å‡ºç° `000`ã€`01`â€¦â€¦è¿™æ ·
  - é»˜è®¤å°±å‡ºç°ä¸ª `0`ï¼Œç”¨æˆ·ç¬¬ä¸€æ¬¡ç›´æ¥è¾“å…¥ä¸€ä¸ª`.`ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯`0.`

![åŠŸèƒ½å±•ç¤º](assets/img/2020-09-01-23-13-10.png)

ä»£ç ï¼š[Demo](https://github.com/ppambler/vue-morney/commit/67d707f5f39ef4523d1afbe416ab77a99295169c)

4ï¼‰ä»£ç åˆ†æ

`height: 72px`ï¼š

ä¸ºå•¥è¦å†™é«˜åº¦ï¼Ÿä¸ºå•¥ä¸å†™ `min-height`ï¼Ÿ

ä¸å†™é«˜åº¦çš„è¯ï¼Œç”¨æˆ·ä¸€è¿›æ¥é¡µé¢ï¼Œé‚£ä¹ˆé‚£ä¸ªå±•ç¤ºè¾“å…¥æƒ…å†µçš„æ¡†æ¡†å°±ä¼šæœ‰ä¸ªä»ä½åˆ°é«˜è¿™æ ·ä¸€ä¸ªå˜åŒ–çš„é—ªçƒæƒ…å†µï¼ˆç”±äº JS æ¸²æŸ“ DOM æ˜¯éœ€è¦æ—¶é—´çš„ï¼Œæ‰€ä»¥ä½ ç»™äº†è¿™ä¸ªæ¡†æ¡†åˆå§‹å€¼ä¹Ÿæ˜¯ä¼šæœ‰é—®é¢˜çš„ï¼æˆ‘ä»¬åŸå…ˆå°±ç›´æ¥ç»™è¿™ä¸ªæ¡†æ¡†å…ƒç´ ä¸€ä¸ªå­—ç¬¦ä¸²`100`ï¼Œä½†ç°åœ¨å®ƒæ˜¯åŠ¨æ€å˜åŒ–çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ç”¨äº†æ’å€¼è¡¨è¾¾å¼ï¼ï¼‰ -> `min-height`ï¼Œä½ ä¸èƒ½ä¿è¯æ¯ä¸ªå­—ç¬¦æ˜¯å¦é«˜åº¦ä¸€è‡´ï¼Œå¯èƒ½ä½ è¾“å…¥æŸä¸ªå­—ç¬¦çš„æ—¶å€™ï¼Œå¢åŠ äº†ä¸€ä¸ª `1px` ï¼Œå¯¼è‡´æ¡†æ¡†é—ªçƒäº†ä¸€ä¸‹

æ‰€ä»¥ç»¼åˆèµ·æ¥çœ‹ï¼Œæˆ‘ä»¬å°±å¾—å†™æ­»è¿™ä¸ªé«˜åº¦ï¼ -> å½“ç„¶ï¼Œè¿™æ˜¯ä¸å¾—å·²çš„æƒ…å†µï¼

---

`inputContent(event: MouseEvent) {}`ï¼š

æˆ‘ä»¬å¯ä»¥ `@click="output += 1"` è¿™æ ·åšï¼Œä½†è¿™æ ·å¿’éº»çƒ¦äº†ï¼è€Œä¸”ä¹Ÿä¸å¥½å†™ï¼æ‰€ä»¥æˆ‘ä»¬ç”¨äº†è¿™ç§å§¿åŠ¿ï¼š`@click="inputContent('1')"`

å¯è¿™ç§å§¿åŠ¿ä¹Ÿä¸å¥½ï¼Œæ ¹æ®ã€Œ**æˆ‘ä¸é‡å¤ä¸å…±æˆ´å¤©**ã€åŸåˆ™ï¼Œæœ€åé€‰æ‹©äº†è¿™ç§`@click="inputContent"` ä¸ä¼ å‚æ•°çš„åšæ³•ï¼ˆVue ä¼šè‡ªåŠ¨ä¼ ä¸€ä¸ª**äº‹ä»¶å¯¹è±¡**ç»™è¿™ä¸ªæ–¹æ³•ï¼Œé€è¿‡è¿™ä¸ªäº‹ä»¶å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°ç”¨æˆ·æ‰€ç‚¹å‡»çš„é‚£ä¸ª`button`çš„å€¼ï¼‰ -> å½“ç„¶ï¼Œè¿™`inputContent`è¿˜æ˜¯é‡å¤ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€åå¯ä»¥ç”¨äº‹ä»¶ä»£ç†çš„å§¿åŠ¿æ¥æï¼

å›è¿‡å¤´æ¥çœ‹è¿™ä¸ª `event: MouseEvent` -> æ²¡æœ‰ç‚¹å‡»äº‹ä»¶ï¼Œåªæœ‰é¼ æ ‡äº‹ä»¶ã€é”®ç›˜äº‹ä»¶ã€UI äº‹ä»¶ç­‰ç­‰çš„ï¼ -> ç‚¹å‡»äº‹ä»¶æ˜¯é¼ æ ‡äº‹ä»¶çš„å„¿å­ï¼

è¿™è¡Œ`event.target as HTMLButtonElement;`ä»£ç ï¼Œä¸ºå•¥è¦åŠ ä¸ª `as HTMLButtonElement`ï¼Ÿ

- `e.target` æŒ‡å‘è§¦å‘äº‹ä»¶ç›‘å¬çš„å¯¹è±¡ã€‚
- `e.currentTarget` æŒ‡å‘æ·»åŠ ç›‘å¬äº‹ä»¶çš„å¯¹è±¡ã€‚

å¯¹äº TS è€Œè¨€ï¼Œé¢å¯¹ `e.target.textContent`è¿™æ ·çš„ä»£ç ï¼Œ`e.target` æœ‰å¯èƒ½ä¸ºç©ºï¼`e.target`å¯èƒ½æ²¡æœ‰`textContent`ï¼Œå¦‚å›¾ç‰‡å°±å’©æœ‰å†…å®¹ï¼ï¼ˆ**ä¸æ˜¯æ‰€æœ‰å…ƒç´ éƒ½æœ‰å†…å®¹çš„ï¼**ï¼‰

å½“ä½ é¢å¯¹è¿™ç§å†™å•¥éƒ½æœ‰æ„å¤–çš„æƒ…å†µï¼Œä½ çœŸå¾—æœ‰ç§ä¸æƒ³å†™ä¸‹å»çš„æ„Ÿè§‰ï¼å¹¸å¥½ï¼Œæˆ‘ä»¬å¯ä»¥**å¼ºåˆ¶æŒ‡å®šç±»å‹**ï¼Œè€Œè¿™å°±æ˜¯ä¸ºå•¥è¦ç”¨ `as HTMLButtonElement` çš„åŸå› äº†ï¼Œä½ æ·»åŠ äº†è¿™ä¸ªï¼Œé‚£å°±æ„å‘³ç€ï¼Œè¿™ä¸ªå…ƒç´ æ˜¯æœ‰å†…å®¹çš„ï¼Œå³ä¾¿ `button` å…ƒç´ çš„å†…å®¹ç©ºå­—ç¬¦ä¸²ä¹Ÿæ˜¯æœ‰å†…å®¹çš„ï¼

è™½ç„¶è¿™æ ·å†™ä»£ç è®©äººè›‹ç–¼ï¼Œä½†è¿™ä»£ç å†™å¾—å¾ˆç²¾ç¡®ï¼Œä¸ä¼šæœ‰ä»»ä½• bugï¼

> å¼ºåˆ¶æŒ‡å®šç±»å‹ä¼šç»å¸¸ç”¨åˆ°ï¼Œå°¤å…¶ç”¨åœ¨ `event.target` ä¸Šï¼ -> ä¸ºå•¥ä¼šè¿™æ ·ï¼Ÿå› ä¸º Vue2 å’Œ TS çš„æ­é…å¹¶æ²¡æœ‰é‚£ä¹ˆå¥½ï¼ç…§ç†è¯´ï¼Œåƒ `event.target` è¿™æ ·ä»£ç ï¼Œ`tsc` æ˜¯å¯ä»¥è‡ªåŠ¨è¯†åˆ«çš„ï¼Œæˆ–è€… Vue ä¼šåœ¨ç¼–è¯‘æ¨¡æ¿çš„æ—¶å€™ï¼Œå‘ŠçŸ¥ `tsc` è¿™ä¸ªå…ƒç´ æ˜¯ä¸ª`button`å…ƒç´ 

---

`"0123456789".indexOf(input) >= 0` çš„è¯»æ³•ï¼šä½ è¾“å…¥çš„ä¸œè¥¿åœ¨`0123456789`ä¹‹é—´ï¼Œé‚£å°±å¤§äºç­‰äº`0`

`this.output.indexOf(".") >= 0` çš„è¯»æ³•ï¼š`output`çš„ä¸œè¥¿å·²ç»æœ‰`.`äº†

---

ä½ åœ¨è®¡ç®—å™¨é‡Œè¾¹è¾“å…¥çš„å­—ç¬¦ä¸ªæ•°æ˜¯æœ‰é™åˆ¶çš„ -> æœ€å¤š`16`ä¸ªå­—ç¬¦

---

`const input = button.textContent!;`ï¼š

æ²¡æœ‰ `!`ï¼Œé‚£ä¹ˆä½ åœ¨ç”¨ `input` çš„æ—¶å€™ï¼Œ`tsc` ä¼šè¯´ `input` å¯èƒ½ä¸º `null`ï¼š

![tsc çš„æ¯›ç—…](assets/img/2020-09-01-23-36-43.png)

æ‰€ä»¥æˆ‘ä»¬å°±å¼ºåˆ¶æ–­è¨€ä¸€ä¸‹ `input` ä¸å¯èƒ½æ˜¯ `null`ï¼Œè€Œæ˜¯ä¸€ä¸ª `string`ï¼š`button.textContent as string`

å¦‚æœæˆ‘ä»¬åªæ˜¯æŠŠå®ƒä¸ä¸º`null`è¿™ç§æƒ…å†µç»™æ’é™¤æ‰ï¼Œé‚£ä¹ˆè¿™è¿˜æœ‰ä¸€ç§å†™æ³•ï¼Œé‚£å°±æ˜¯ `button.textContent!` -> `!`ç›¸å½“äºæ˜¯`as string`è¿™æ ·çš„ä¸œè¥¿ï¼Œè¯´ç™½äº†å°±æ˜¯å®ƒè¡¨ç¤ºä¸ä¸º`null`çš„å€¼ï¼Œå®ƒå¯ä»¥æ˜¯`as number`ã€`as boolean`ä¹‹ç±»çš„ä¸œè¥¿â€¦â€¦ -> **`!`ç±»ä¼¼äºæ°´æœè¿™æ ·çš„ä¸œè¥¿ï¼Œå®ƒå¯ä»¥æ˜¯è‹¹æœã€æ¡ƒå­ã€æå­â€¦â€¦ï¼Œä½†å®ƒå°±æ˜¯ä¸æ˜¯ä¸ç“œã€è‹¦ç“œä¹‹ç±»çš„ä¸œè¥¿**

æ€»ä¹‹ï¼Œ`!`å°±æ˜¯åœ¨æç¤ºæˆ‘ä»¬ `button.textContent` ä¸æ˜¯ä¸€ä¸ª `null` å€¼ï¼Œè€Œæˆ‘ä»¬ä¹‹æ‰€ä»¥èƒ½ç¡®åˆ‡çŸ¥é“å®ƒä¸æ˜¯`null`ï¼Œå› ä¸ºæˆ‘ä»¬å†™çš„`button`å…ƒç´ å°±æœ‰æ˜¯å†…å®¹çš„å‘€ï¼å³ä¾¿å†…å®¹æ˜¯ä¸ªç©ºå­—ç¬¦ä¸²ï¼

å¯¹äº†ï¼Œå¦‚æœ `tsc` æç¤ºæŸä¸ªå˜é‡å¯èƒ½æ˜¯ `undefined`ï¼Œé‚£ä¹ˆä½ ä¹Ÿå¯ä»¥ç”¨ `!`ï¼

---

`inputContent`æ–¹æ³•é‡Œè¾¹çš„`ifâ€¦â€¦elseâ€¦â€¦`é€»è¾‘ï¼š

![output vs input](assets/img/2020-09-01-23-52-25.png)

---

`this.output = this.output.slice(0, -1)`ï¼š

æŠŠåˆ‡å‰²å‡ºæ¥çš„ç»“æœä½œä¸ºç»„ä»¶çš„`output`çŠ¶æ€ï¼

![slice API](assets/img/2020-09-01-23-17-53.png)

`-1`æ˜¯æœ€åä¸€ä¸ªå­—ç¬¦ï¼ -> **æ­£å€¼ä»å·¦å¾€å³æ­£æ•°ï¼ˆç´¢å¼•ä¸º `0` æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦ï¼‰ï¼Œè´Ÿå€¼ä»å³å¾€å·¦å€’æ•°ï¼ˆç´¢å¼•ä¸º `-1` æ˜¯æœ€åä¸€ä¸ªå­—ç¬¦ï¼Œ`-2` å°±æ˜¯å€’æ•°ç¬¬äºŒï¼‰**

> ä¸ºå•¥æ˜¯ä» `0` å¼€å§‹çš„ï¼Ÿéš¾é“ä¸åº”è¯¥æ˜¯ç¬¬ä¸€ä¸ªå­—ç¬¦ `1` è¿™æ ·å—ï¼Ÿ -> å› ä¸ºè¿™æ˜¯å¤–å›½äººçš„ä¹ æƒ¯ï¼Œå¤–å›½äººåœ¨è¯´æ¥è§¦åœ°é¢ä¸Šçš„é‚£ä¸€å±‚ï¼Œæ˜¯è¯´ Ground Floorï¼Œç„¶åæ¥ç€ä¸Šä¸€å±‚æ‰æ˜¯ First Floorï¼Œè€Œæˆ‘ä»¬ä¸­å›½åˆ™æ˜¯ 1 æ¥¼ï¼Œç„¶å 2 æ¥¼è¿™æ ·å­â€¦â€¦

5ï¼‰é‡å¤çš„ä¸œè¥¿å‡ºç°äº†ï¼Œä½†å¾ˆéš¾æ¶ˆé™¤ï¼Ÿ

![é‡å¤éš¾ä»¥æ¶ˆé™¤](assets/img/2020-09-02-00-07-01.png)

6ï¼‰å°ç»“

- å¯¹äºæˆ‘ä»¬ç”¨æˆ·è€Œè¨€ï¼Œæˆ‘ä»¬æ‘è®¡ç®—å™¨ä¸Šçš„æŒ‰é”®ï¼Œç„¶åæœ‰ç›¸åº”çš„å­—ç¬¦å±•ç¤ºåœ¨`output`é‡Œè¾¹ï¼Œè¿™å…¶å®ä¼šè®©æˆ‘ä»¬è¯¯ä»¥ä¸ºåœ¨å¾€ `output` é‡Œè¾“å…¥ä¸œè¥¿ï¼ -> çœŸæ­£çš„ç†è§£æ˜¯ï¼šç”¨æˆ·éšæ„æŒ‰ä¸‹çš„é”®æ‰æ˜¯`input`ï¼Œé‚£ä¸ªå±•ç¤ºæˆ‘ä»¬ `input` å­—ç¬¦çš„æ‰æ˜¯ `output`ï¼ -> **è™½ç„¶æ˜¯ä¸ª`input`å…ƒç´ ï¼Œä½†ä¹Ÿå¯ä»¥å®¢ä¸²æˆ`output`å…ƒç´ **
- çœ‹ä¸€ä¸ª API æ˜¯ä»€ä¹ˆæ—¶å€™æ·»åŠ çš„ï¼Ÿ -> å»çœ‹ MDN æ‰¾åˆ°è¿™ä¸ª APIï¼Œç„¶åè·³åˆ°ã€Œè§„èŒƒã€è¿™ä¸ªæ ‡é¢˜ï¼ -> å¦‚ `slice`ï¼ˆæ–¹æ–¹ä¸€ç›´ä»¥ä¸º`slice`åªæœ‰æ•°ç»„æ‰æœ‰ï¼Œæ²¡æƒ³åˆ°å­—ç¬¦ä¸²ä¹Ÿæœ‰ï¼Œäºæ˜¯ä»–è®¤ä¸ºè¿™ä¸ª`slice`æ˜¯ ES6 æ—¶è¿½åŠ çš„â€¦â€¦è°çŸ¥åˆ°è¯¥ API åœ¨ ES3 å°±æœ‰äº†ï¼‰
- ä»£ç é‡Œè¾¹çš„`ifâ€¦â€¦elseâ€¦â€¦`ä¸æ˜¯ä¸€æ°”å‘µæˆå°±å†™å‡ºæ¥çš„ï¼Œåœ¨å†™å®ƒçš„è¿‡ç¨‹ä¸­ï¼Œä»£ç ä»å¾ˆæ··ä¹±çš„çŠ¶æ€ï¼Œå†åˆ°å¾ˆæ¸…æ™°çš„çŠ¶æ€ã€‚ -> è¿™æ˜¯ä¸€ä¸ªè¶Šå†™è¶Šæ¸…æ™°çš„è¿‡ç¨‹ï¼

## â˜…notes æ¨¡å— - `v-model`

1ï¼‰ä»£ç å®ç°

æ€è·¯ï¼š

ç”¨æˆ·è¾“å…¥çš„å†…å®¹éœ€è¦**è®©æˆ‘ä»¬çš„ JS ä»£ç è¿‡ä¸€æ‰‹**å†æ˜¾ç¤ºåˆ°è¾“å…¥æ¡†ï¼ -> æ‰€è°“çš„ã€ŒåŒå‘ç»‘å®šã€

ä»£ç ï¼š

![ä»£ç ](assets/img/2020-09-02-13-52-08.png)

æ³¨æ„ï¼Œå¦‚æœæ˜¯åŸç”Ÿ HTMLï¼Œæˆ‘ä»¬æ˜¯é€šè¿‡ `event.target` æ‹¿åˆ° `input` æ¡†çš„è¾“å…¥å€¼çš„ï¼è€Œå…¶å®ƒçš„æˆ‘ä»¬è‡ªå®šä¹‰çš„ `input` ç»„ä»¶ï¼Œç›´æ¥å°±æ˜¯é€šè¿‡ `value` æ‹¿åˆ°å€¼ï¼

> `template`é‡Œè¾¹æ‹¿åˆ°äº‹ä»¶å¯¹è±¡ç”¨ `$event`ï¼ˆä¸éœ€è¦ TS ç±»å‹ï¼‰ï¼Œæ–¹æ³•é‡Œè¾¹åˆ™æ˜¯å½¢å‚`event`ï¼ˆéœ€è¦ TS ç±»å‹ï¼‰

ä¸ºå•¥ä¸ç”¨ `change` äº‹ä»¶ï¼Ÿ -> å¤±å»ç„¦ç‚¹æ‰ä¼šè§¦å‘`change`äº‹ä»¶ï¼

> å…³äºå½¢å‚ `event` æ˜¯ä»€ä¹ˆç±»å‹çš„äº‹ä»¶ï¼Ÿ -> éœ€è¦ä½ è‡ªå·±å»æŸ¥æ‰¾ï¼Œå¦‚ `input` äº‹ä»¶å°±æ˜¯ `KeyboardEvent`

2ï¼‰`v-model`

å¦‚æœä½ çš„ä»£ç å‡ºç°è¿™ç§å½¢å¼çš„ä»£ç ï¼š

![è„±ç³–](assets/img/2020-09-02-14-10-15.png)

é‚£ä¹ˆä½ å¯ä»¥æŠŠé‚£ä¸¤å¥è¯ï¼ˆ`:value`+`@input`ï¼‰ç®€å†™æˆ `v-model`ï¼š

![v-model](assets/img/2020-09-02-14-12-10.png)

> æˆ‘ä»¬ä¸€èˆ¬ç”¨ `value` ä½œä¸º `input` ç»„ä»¶çš„çŠ¶æ€ï¼

`v-model` æ˜¯ vue ä» angular 1 æŠ„è¿‡æ¥çš„ï¼ -> æ‰€ä»¥ï¼Œä¸è¦é—®ä¸ºå•¥è¦è¿™æ ·å†™ï¼è¿™æ˜¯å†å²åŸå› å†³å®šçš„ï¼Œè¯·ä¸è¦é—®ã€Œä¸ºä»€ä¹ˆã€!

> `v-model` çš„å­˜åœ¨è®©æˆ‘ä»¬å°‘å†™äº†å¾ˆå¤šä»£ç ï¼è¯è¯´ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¿åˆ°ç”¨æˆ·è¾“å…¥çš„å€¼ï¼Œä½†æ˜¯ä¸ºå•¥è¿˜æœ‰æŠŠæ‹¿åˆ°çš„å€¼å†èµ‹å€¼ç»™ `input`å…ƒç´  çš„ `value` å±æ€§å‘¢ï¼Ÿ è¿™éš¾é“ä¸æ˜¯è‡ªåŠ¨å°±èƒ½èµ‹å€¼çš„å—ï¼Ÿ ä¸ºå•¥è¿˜è¦è¿™æ ·å¤šæ­¤ä¸€ä¸¾ï¼Ÿ -> éš¾é“è¿™æ˜¯ä¸ºäº†ä¿å­˜ç”¨æˆ·è¾“å…¥çš„çŠ¶æ€ï¼Ÿè¿˜æ˜¯æ˜¯è¯´æˆ‘ä»¬è¦æŠŠ`input`å…ƒç´ çš„å€¼çš„çŠ¶æ€äº¤ç»™è¿™ä¸ª `Notes` ç»„ä»¶æ¥ç®¡æ§ï¼Ÿ -> `Notes` ç»„ä»¶çœ‹ä¸Šå»å°±åƒæ˜¯ä¸€ä¸ª `input` å…ƒç´ ä¸€æ ·ï¼

![ä¸ºå•¥è¦æ·»åŠ ä¸€ä¸ª value çŠ¶æ€](assets/img/2020-09-02-14-27-15.png)

æ‰€è°“çš„åŒå‘ç»‘å®šåº”è¯¥å°±æ˜¯ï¼š

- `Notes`ç»„ä»¶çš„`value`çŠ¶æ€ ä¸ `input` å…ƒç´ çš„ `value`å±æ€§ä¹‹é—´çš„ç»‘å®šï¼ˆ**å†…åˆ°å¤–ï¼ŒJS åˆ°ç•Œé¢**ï¼‰
- ç”¨æˆ·å¾€`input`æ¡†è¾“å…¥çš„å†…å®¹ ï¼Œä¹Ÿå°±æ˜¯ `input` å…ƒç´ çš„ `value` ä¸ `Notes`ç»„ä»¶çš„`value`çŠ¶æ€ä¹‹é—´çš„ç»‘å®šï¼ˆ**å¤–åˆ°å†…ï¼Œç•Œé¢åˆ° JS**ï¼‰

![å•å‘æ•°æ®æµ](assets/img/2020-09-02-14-41-16.png)

> `v-model` ç»™äº†æˆ‘ä»¬åŒå‘ç»‘å®šçš„é”™è§‰ï¼Œå› ä¸ºå®ƒè®©æˆ‘ä»¬å¿½è§†äº† `@input` çš„ä½œç”¨ï¼

![å‡çš„åŒå‘ç»‘å®š](assets/img/2020-09-02-14-45-55.png)

## â˜…tags æ¨¡å—


