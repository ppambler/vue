### âœï¸ Tangxt â³ 2020-08-27 ğŸ·ï¸ Money ç»„ä»¶

# Money.vue ç»„ä»¶ï¼ˆä¸‹ï¼‰

## â˜…JS ç»„ä»¶

> å…ˆç”¨ JS çš„å§¿åŠ¿æ¥å†™ï¼Œå†™å®Œåå†æ”¹å†™æˆ TS å§¿åŠ¿çš„ï¼

1ï¼‰ã€Œæ”¶å…¥ã€&ã€Œæ”¯å‡ºã€ç±»å‹åˆ‡æ¢ç»„ä»¶

åˆšå¼€å§‹æï¼Œå°±æ¥æ•´ä¸ªæœ€ç®€å•çš„ï¼

åœ¨å•æ–‡ä»¶ç»„ä»¶é‡Œè¾¹ï¼Œå†™ JS åŒºåŸŸçš„æ¨¡æ¿ï¼š

``` html
<script>
  export default { data, props, methods, created, /**...**/ }
</script>

<!-- <=> -->

<script lang="js">
  export default { data, props, methods, created, /**...**/ }
</script>
```

> ä½ ä¸å†™`lang="js"`ï¼Œé»˜è®¤å°±æ˜¯ `lang="js"`ï¼

æ€è·¯ï¼š

1. å®šä¹‰è¿™ä¸ªåˆ‡æ¢ç»„ä»¶çš„çŠ¶æ€ï¼š`type`ä¸º`'+'/'-'`åˆ™è¡¨ç¤ºç»„ä»¶ä¸ºã€Œæ”¶å…¥/æ”¯å‡ºã€çŠ¶æ€ -> å®šä¹‰ç»„ä»¶çŠ¶æ€ç”¨ `data`
2. åœ¨`template`é‡Œè¾¹ä»£è¡¨ã€Œæ”¯å‡ºã€å’Œã€Œæ”¶å…¥ã€çš„è¿™ä¿©å…ƒç´ ï¼Œæ­¤æ—¶ `type` ä¸ºä½•å€¼ï¼Œé‚£ä¹ˆç›¸å¯¹åº”çš„è°å°±æœ‰ä¸‹åˆ’çº¿ï¼Œä¹Ÿå°±æ˜¯è°ä¼šæœ‰ `selected` è¿™ä¸ª class
3. ç»„ä»¶çŠ¶æ€çš„æ”¹å˜ -> `click` å…ƒç´ 

ä»£ç ï¼š[Demo](https://github.com/ppambler/vue-morney/commit/8425cd2198778b2a1dddbb2a629e234a499820ba)

2ï¼‰ä»£ç åˆ†æ

`:class="type === '-' && 'selected'"`ï¼š

![å’©æœ‰ä¸€ä¸ªå« false çš„ class](assets/img/2020-08-30-19-28-59.png)

vue åœ¨èƒŒååšäº†å¾ˆå¤šäº‹æƒ…ï¼Œå¦‚æœ `&&` è¡¨è¾¾å¼è¿”å›äº† `false`ï¼Œé‚£ä¹ˆ vue å°±ä¼šè‡ªåŠ¨æŠŠè¿™ä¸ª `false` å€¼ç»™å»æ‰ï¼Œæ¯•ç«Ÿ class æ˜¯ `false` æœªå…ä¹Ÿæ˜¾å¾—å¿’å¥‡æ€ªäº†å§ï¼ -> æ€»ä¹‹ï¼Œè¿™æ˜¯ä¸€ç§**ç®€å†™çš„å†™æ³•**ï¼æ­£å¸¸å†™æ³•åº”è¯¥æ˜¯æ•´ä¸ªä¸‰ç›®è¿ç®—â€¦â€¦

`@click="selectType('-')"`ï¼š

è¿™è¿˜æœ‰ä¸€ç§å†™æ³•ï¼Œé‚£å°±æ˜¯ç›´æ¥ `type = '-'`å°±å¯ä»¥äº†ï¼Œä½†æ˜¯è¿™ç§å†™æ³•**åªèƒ½å†™ä¸€è¡Œä»£ç **ï¼Œæ‰€ä»¥è¿™å°±æ˜¾å¾—å¾ˆé¸¡è‚‹äº†ï¼è€Œæ–¹æ³•è°ƒç”¨åˆ™å¯ä»¥**å†™å¤šè¡Œä»£ç **ï¼

è¯¥ã€Œåˆ‡æ¢ç»„ä»¶ï¼ˆ`Types`ï¼‰ã€æ¥æ”¶å¤–è¾¹ä¼ è¿‡æ¥çš„å€¼ï¼š

é€è¿‡ `props` è¿™ä¸ª options API å°±å¯ä»¥åšåˆ°ï¼ -> æ‹¿åˆ°ä¼ è¿‡æ¥çš„å€¼ï¼Œä¸€èˆ¬æ‰”åˆ° `mounted` é‡Œè¾¹ä½¿ç”¨ï¼

![å¦‚ä½•çœ‹ `props`ï¼Ÿ](assets/img/2020-08-30-19-50-39.png)

---

æ¥ä¸‹æ¥çœ‹çœ‹å¦‚ä½•æŠŠä¸Šè¾¹çš„ JS ä»£ç ï¼Œæ”¹æˆæ˜¯ TS å§¿åŠ¿çš„ï¼

## â˜…TS ç»„ä»¶

> å®ç°ç¬¬ä¸€ä¸ª TS Vue ç»„ä»¶

![å¦‚ä½•å†™ä¸€ä¸ª TS ç»„ä»¶ï¼Ÿ](assets/img/2020-08-31-13-56-10.png)

1ï¼‰TS ç»„ä»¶ vs JS ç»„ä»¶

å®ƒä»¬ä¿©æœ€å¤§çš„ä¸åŒï¼š

TS ç»„ä»¶ä¸ç”¨æ„é€ é€‰é¡¹ -> ä¸ºå•¥ä¸ç”¨ï¼Ÿ -> å› ä¸ºæ„é€ é€‰é¡¹æ˜¯æ²¡æœ‰ç±»å‹çš„ï¼Œè€Œä¸”å¯ä»¥éšä¾¿åŠ ä¸œè¥¿ï¼

å†™ TS ç»„ä»¶å¿…é¡»è¦ç”¨ `Class` -> è¿™æ˜¯ Vue è§„å®šçš„ï¼

2ï¼‰å¦‚ä½•å†™ä¸€ä¸ª TS ç»„ä»¶ï¼Ÿ

1. ä¸º `<script>` æ·»åŠ  `lang="ts"`
2. å¯¼å‡ºä¸€ä¸ª `class`ï¼Œè€Œä¸”è¯¥ `class` ç»§æ‰¿ `Vue` -> è¿™æ˜¯è§„å®š
3. åœ¨ `class` é‡Œè¾¹å®šä¹‰å®ä¾‹çš„è‡ªæœ‰å±æ€§ -> å°±æ˜¯åœ¨å¹² `data` çš„æ´»å„¿
4. åœ¨ `class` é‡Œè¾¹å®šä¹‰å®ä¾‹çš„æ–¹æ³• -> å°±æ˜¯åœ¨å¹² `methods` çš„æ´»å„¿
5. å®‰è£…`vue-property-decorator`ï¼š`npm i -S vue-property-decorator` -> åœ¨å®‰è£…`vue-property-decorator`çš„è¿‡ç¨‹ä¸­ï¼Œè¿å¸¦ç€`vue-class-component`ä¹Ÿä¸€èµ·å®‰è£…äº†ï¼
6. æ·»åŠ è£…é¥°å™¨ `@Component` -> æœ‰äº†å®ƒï¼Œå°±å¯ä»¥æŠŠã€Œè‡ªæœ‰å±æ€§+å®ä¾‹æ–¹æ³•ã€è‡ªåŠ¨å¤„ç†æˆã€Œ`data`+`methods`ã€äº† -> æ²¡æœ‰å®ƒï¼Œé‚£å°±ä¸å¸®ä½ å¤„ç†äº†ï¼ -> **æ€»ä¹‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„å¸®æˆ‘ä»¬å¤„ç†ä»£ç çš„ä¸œè¥¿**
7. ä¸º JS ä»£ç åŠ ç±»å‹ -> ä½ ç”¨ webstormï¼Œå¦‚æœä»£ç å‡ºç°çˆ†çº¢ï¼Œé‚£ä¹ˆä½ å°±å¾—æŠŠå®ƒå»å¤„ç†æˆä¸çˆ†çº¢çš„çŠ¶æ€ï¼ å¦‚ï¼šä¸ºå½¢å‚åŠ ç±»å‹ `selectType(type: string) {}`ï¼ˆæ˜¯å°å†™çš„`string`ï¼Œå¯ä¸æ˜¯å¤§å†™çš„`String`ï¼‰

> å¦‚ä½•æ·»åŠ ç”Ÿå‘½å‘¨æœŸé’©å­ï¼Ÿ -> ç›´æ¥ `created() {}` å°±è¡Œäº†ï¼

ä»£ç ï¼š

![ä»£ç ](assets/img/2020-08-31-17-17-06.png)

3ï¼‰vue-property-decorator

æ–‡æ¡£ï¼š[kaorun343/vue-property-decorator: Vue.js and Property Decorator](https://github.com/kaorun343/vue-property-decorator)

è¿™ä¸ªåŒ…ä¸æ˜¯å°¤é›¨æºªå†™çš„ï¼Œè¯è¯´ï¼Œä¸ºå•¥ä¸ç”¨å°¤é›¨æºªçš„å‘¢ï¼Ÿ -> å› ä¸ºå°¤é›¨æºªå†™çš„æ²¡æœ‰è¿™ä¸ªäººå†™çš„å¥½ï¼

å°¤é›¨æºªå†™çš„æ˜¯è¿™ä¸ªï¼š[vuejs/vue-class-component: ES / TypeScript decorator for class-style Vue components.](https://github.com/vuejs/vue-class-component) -> è¿™æ˜¯ Vue å®˜æ–¹æä¾›çš„ TS æ”¯æŒåº“ï¼ä½†å…¶åŠŸèƒ½ä¸å¦‚ `vue-property-decorator` å¥½ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±ç”¨äº†è¿™ä¸ª `vue-property-decorator`ï¼

`vue-property-decorator` æä¾›äº†å¥½å‡ ä¸ªè£…é¥°å™¨ï¼ˆ`@`å¼€å¤´çš„ï¼‰ï¼Œå½“ç„¶ï¼Œæˆ‘ä»¬ç”¨çš„è¿™ä¸ª `@Component` æ˜¯ Vue å®˜æ–¹æä¾›çš„ï¼æ‰€ä»¥ï¼Œå¦‚æœä½ è¦çœ‹ `@Component` çš„å®˜æ–¹æ–‡æ¡£ï¼Œé‚£å°±å¾—çœ‹ `vue-class-component` çš„ï¼

é€è¿‡ CRM å­¦ä¹ æ³•æ¥äº†è§£ `@Component` çš„ä½¿ç”¨ï¼š

> æ–‡æ¡£ï¼š[Overview - Vue Class Component](https://class-component.vuejs.org/)

![vue-class-component ä½¿ç”¨å§¿åŠ¿](assets/img/2020-08-31-14-27-22.png)

> CRM å­¦ä¹ æ³•ï¼Œè®©ä½ å¯ä»¥ä¸ç”¨æ·±ç©¶æ‰€æœ‰çš„äº‹æƒ…ï¼Œ**èŠ‚çœå¤§é‡çš„æ—¶é—´**ï¼å½“ç„¶ï¼Œä½ çš„ JS åŸºç¡€å¾—æ‰å®æ‰è¡Œï¼ -> ã€Œ`class` è¯­æ³•ã€ æ— éå°±æ˜¯æŠŠ ã€ŒJS å¯¹è±¡å†™æ³•ã€ æ¢æˆæ˜¯å¦ä¸€ç§å†™æ³•ç½¢äº†ï¼æ‰€ä»¥ï¼Œå¦‚æœä½ æ—¶é—´æœ‰é™çš„è¯ï¼Œå…¶å®å¯ä»¥æ”¾å¼ƒæ·±ç©¶ `class` çš„è¯­æ³•ç»†èŠ‚ï¼Œä»¥åŠ è£…é¥°å™¨çš„ç”¨æ³•ï¼ç›´æ¥ä¾è‘«èŠ¦ç”»ç“¢å°±è¡Œäº†ï¼Œåæ­£ä½ å·²ç»çŸ¥é“è¿™ç§å†™æ³•çš„èƒŒååˆ°åº•åšäº†ä»€ä¹ˆâ€¦â€¦

## â˜…TS ç»„ä»¶ @Prop è£…é¥°å™¨

1ï¼‰å¦‚ä½•å†™ propsï¼Ÿ

![props](assets/img/2020-08-31-18-14-45.png)

Vetur æç¤ºè¯´ `Property 'xxx' does not exist on type 'Types'`ï¼ˆ`xxx`ä¸å­˜åœ¨äº`Types`è¿™ä¸ª`class`é‡Œè¾¹ï¼ï¼‰

å¯ä»¥çœ‹åˆ°å®˜æ–¹æ–‡æ¡£ç¿»è½¦äº†â€¦â€¦ï¼ˆæˆ–è®¸è¿™æ˜¯æ’ä»¶çš„ç¼˜æ•…ï¼æ¯•ç«Ÿæ•ˆæœå·²ç»å‡ºæ¥äº†ï¼Œåªæ˜¯æ’ä»¶æ£€æµ‹è¯´è¿™æœ‰é—®é¢˜ç½¢äº†ï¼ï¼‰

ä»£ç ï¼š[Demo](https://github.com/ppambler/vue-morney/commit/f17179b32b6a7cf40bee969d474467d6f3858f56)

2ï¼‰ç”¨ @Prop æ¥å†™ props

![@Prop](assets/img/2020-08-31-18-43-17.png)

ä½ åœ¨çˆ¶ç»„ä»¶é‡Œè¾¹æ˜¯é€è¿‡ `xxx="Money pass data"` æ¥ä¼ å€¼çš„ï¼Œä½†è¿™æ ·çš„å†™æ³•åªèƒ½è¡¨ç¤ºè¿™æ˜¯åœ¨ä¼ å­—ç¬¦ä¸²ï¼Œå› æ­¤ Vue æŠ¥äº†è¿™æ ·çš„é”™è¯¯ï¼š

![ä¼ å­—ç¬¦ä¸²](assets/img/2020-08-31-18-46-11.png)

> å³ä¾¿ä¼ çš„å€¼ä¸ç¬¦åˆç±»å‹ï¼Œä½†æœ€ç»ˆçš„è¿è¡Œç»“æœè¿˜æ˜¯å‡ºæ¥äº†ï¼ -> Vue çš„å®¹é”™æ€§å¤„ç†ï¼

æ‰€ä»¥ä½ å¾—è¿™æ ·æ¥ï¼š`:xxx="666"`ï¼ˆåŠ ä¸€ä¸ª`:`ï¼Œæ„å‘³ç€å±æ€§å€¼æ˜¯ JS ä»£ç ï¼‰

ä»£ç ï¼š[Demo](https://github.com/ppambler/vue-morney/commit/354969b5caf71a3720b35e23559447c484009864)

3ï¼‰ä»£ç è§£æ

`@Prop(Number) xxx: number | undefined;`ï¼š

è¿™è¡Œä»£ç åœ¨å¹²å˜›ï¼Ÿä¸ºå•¥å†™äº†ä¸€ä¸ªå¤§å†™çš„ `Number` è¿˜å¾—å†å†™ä¸€ä¸ªå°å†™çš„`number`ï¼Ÿ

`number | undefined` -> æ˜¯ç¼–è¯‘æ—¶çš„æ£€æŸ¥ï¼ -> åœ¨ä½ è¿˜æœªè¿è¡Œä»£ç çš„æ—¶å€™å°±èƒ½å‘Šè¯‰ä½ çš„ä»£ç æ˜¯å¦æœ‰é—®é¢˜

å¦‚ï¼š

![TS ä»£ç æ£€æŸ¥](assets/img/2020-08-31-19-01-22.png)

é€è¿‡ä»£ç æ£€æŸ¥ï¼Œä½ å°±æ˜ç™½è‡ªå·±è¿™æ ·å†™æ˜¯æœ‰æ½œåœ¨çš„ bug çš„ï¼ -> æ‰€ä»¥æˆ‘å¾—æ¢ä¸€ç§å†™æ³•ï¼Œå¦‚å…ˆåˆ¤æ–­ä¸€ä¸‹ `this.xxx` æ˜¯å¦ç­‰äº `undefined`ï¼Œå¦‚æœä¸ç­‰äºé‚£å°±è¯æ˜ `this.xxx` æ˜¯ä¸ª `Number` ç±»å‹çš„å€¼â€¦â€¦

å›è¿‡å¤´æ¥ï¼Œæ•´ä½“çœ‹ä¸€ä¸‹ `@Prop(Number) xxx: number | undefined;` è¿™è¡Œä»£ç ï¼š

- `@Prop`æ˜¯ä¸€ä¸ªè£…é¥°å™¨ï¼Œå‘Šè¯‰ Vueï¼šã€Œåè¾¹çš„è¿™ä¸ª `xxx` å±æ€§æ˜¯ä¸ª `prop`ï¼Œè€Œä¸æ˜¯ `data`ã€ -> **ä¸å†™ `@Prop` å°±æ˜¯ `data`ï¼Œå†™äº† `@Prop` å°±æ˜¯ `prop`**
- `Number` -> å‘Šè¯‰ Vue `xxx` **è¿è¡Œæ—¶**æ˜¯ä¸ª `Number`ï¼Œå¦‚æœä¸æ˜¯ `Number` ç±»å‹çš„å€¼ï¼Œé‚£ä¹ˆæµè§ˆå™¨å°±ä¼šæŠ¥é”™ï¼
- `xxx` -> å±æ€§å
- `number | undefined` -> å‘Šè¯‰ TS `xxx` çš„**ç¼–è¯‘æ—¶**ç±»å‹ -> æ³¨æ„ï¼Œä½ ä¸å†™è¿™ä¸ª`undefined`æ˜¯ä¼šæŠ¥ã€Œ`Property 'xxx' has no initializer and is not definitely assigned in the constructor`ã€è¿™æ ·çš„é”™è¯¯çš„ï¼ï¼ˆè”åˆç±»å‹é€šå¸¸ä¸ `null` æˆ– `undefined` ä¸€èµ·ä½¿ç”¨ï¼Œç»™äº†ä¸€ä¸ª `undefined` ç±»å‹ï¼Œ å°±æ˜¯åœ¨å‘Šè¯‰ TS `xxx` çš„åˆå§‹å€¼ä¸º `undefined`ï¼‰

è¯è¯´ï¼Œä¸ºå•¥`Number`æ˜¯å¤§å†™ï¼Œè€Œ`number` æ˜¯å°å†™å‘¢ï¼Ÿéš¾é“ä¸åº”è¯¥éƒ½æ˜¯å°å†™çš„å—ï¼Ÿ

Vue ä½œè€…ä¹Ÿæƒ³æŠŠ `Number` æ”¹æˆæ˜¯å°å†™çš„ï¼Œä½†å› ä¸ºæŸç§åŸå› ï¼ˆåŒºåˆ†è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶ï¼‰å°±æ”¾å¼ƒäº†ï¼

![Number vs number](assets/img/2020-08-31-19-38-48.png)

è¡¥å……ä¸€ç‚¹ï¼š

ä½ ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š`@Prop(Number) xxx: number = 0;`ï¼ˆé»˜è®¤ç»™`xxx`ä¸€ä¸ª`0`çš„é»˜è®¤å€¼ï¼‰ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨æ£€æŸ¥ `xxx` æ˜¯å¦ä¸º `undefined`äº†ï¼Œåä¹‹ï¼Œç”¨åŸå…ˆçš„å§¿åŠ¿ä½ å°±å¾—å¤„å¤„æ£€æŸ¥`this.xxx`æ˜¯å¦ä¸º`undefined` -> æˆ‘æµ‹è¯•äº†ä¸€ä¸‹ç»™ä¸Šåˆå§‹å€¼ï¼Œç»“æœæŠ¥äº†è¿™æ ·çš„é”™è¯¯ï¼š

![ç»™ prop åˆå§‹å€¼çš„ bug](assets/img/2020-08-31-20-04-37.png)

`@Prop(Number) xxx: number | undefined;`è¿™ç§å§¿åŠ¿ï¼Œåº”è¯¥æ˜¯åœ¨å‘Šè¯‰ TS è¿™ä¸ª`xxx`æ˜¯æ²¡æœ‰åˆå§‹å€¼çš„ï¼ï¼ˆç–‘é—® ğŸ¤” ï¼‰ -> å¦‚æœçˆ¶ç»„ä»¶ä¸ä¼ `xxx`ï¼Œé‚£ä¹ˆ`this.xxx`å°±æ˜¯`undefined`å€¼äº†ï¼è¿™éš¾é“ä¸å°±æ˜¯åœ¨è¯´åˆå§‹åŒ–å€¼æ˜¯`undefined`å—ï¼Ÿ

4ï¼‰æˆ‘ä»¬ç”¨ TS å†™ä»£ç å¥½è¿˜æ˜¯ä¸å¥½ï¼Ÿ

- å¯¹ä»£ç **æ²¡è¿½æ±‚çš„**å‰ç«¯ -> å†™ TS å°±æ˜¯åœ¨æ‰“æ‰°ä»–ä»¬
- å¯¹ä»£ç **æœ‰è¿½æ±‚çš„**å‰ç«¯ -> è¿™ä¸œè¥¿ç‰›é€¼å‘€ï¼æˆ‘ä»¥å‰æ²¡æœ‰æ³¨æ„åˆ°çš„é”™è¯¯ï¼Œå®ƒéƒ½å‘Šè¯‰æˆ‘äº†ï¼

ç»™æˆ‘å·¥èµ„ 3kï¼Ÿ -> æˆ‘æ˜¯ä¸ªæ²¡è¿½æ±‚çš„å‰ç«¯ï¼Œæ‰€ä»¥æˆ‘çš„ä»£ç éƒ½ç”¨ JS æ¥å†™ -> æŠŠ `lang="ts"` åˆ äº† + å»æ‰æ‰€æœ‰çš„ `: type1 | type2` -> çå†™â€¦â€¦ï¼ˆwebstorm æœ‰æ™ºèƒ½çš„ç¼–è¯‘æ—¶å¼±æç¤ºï¼Œè€Œ vscode åˆ™æ²¡æœ‰ï¼Œåªèƒ½å½“ä»£ç åœ¨æµè§ˆå™¨é‡Œè¾¹è·‘èµ·æ¥äº†æ‰çŸ¥æ™“ï¼ï¼‰

ç»™æˆ‘å·¥èµ„ 10kï¼Ÿ -> é‚£æˆ‘å°±æ˜¯ä¸ªæœ‰è¿½æ±‚çš„å‰ç«¯ï¼Œå› æ­¤æˆ‘çš„ä»£ç åº”è¯¥ç”¨ TS æ¥å†™ï¼

5ï¼‰TS ç±»å‹æ·»åŠ åŸåˆ™

1. ä½ è¿™æ · `type = '-'` å†™äº†ï¼Œé‚£ä¹ˆå°±ä¸ç”¨è¿™æ ·å†™äº†ï¼š `type: string = '-'`ï¼ŒTS ä¼šè‡ªå·±æ¨å¯¼
2. å‡½æ•°çš„è¿”å›å€¼ç±»å‹å£°æ˜ä¸ç”¨å†™ï¼Œå³ä¸ç”¨ `string selectType(){}` è¿™æ ·å†™
3. å‡½æ•°çš„å½¢å‚éœ€è¦å†™ä¸Šç±»å‹å£°æ˜
4. `@Prop(Number) xxx`éœ€è¦å†™ä¸Šç±»å‹å£°æ˜ -> `@Prop(Number) xxx: number | undefined;`

6ï¼‰æ€æ ·ç†è§£è¿™ä¸ªä»£ç ï¼Ÿ

``` js
this.xxx.yyy
```

`this.xxx`ä¸è¿‡å…³ï¼Œå®ƒå¯èƒ½æ˜¯ `undefined`ï¼Œ`this.xxx.yyy`ä¸è¿‡å…³ï¼Œå› ä¸ºå·²çŸ¥`this.xxx`æ˜¯`number`ç±»å‹ï¼Œæ‰€ä»¥å®ƒæ˜¯å’©æœ‰`yyy`è¿™ä¸ªæ–¹æ³•çš„

ä»£ç æ”¹å†™ï¼š

``` js
if(this.xxx === undefined) {
  console.log('xxx is undefined')
} else {
  // xxx ä¸€å®šä¼šæœ‰ toString è¿™ä¸ªæ–¹æ³•ï¼
  console.log(thix.xxx.toString())
}
```

7ï¼‰å†™ TS çš„ 3 ä¸ªå¥½å¤„ï¼Ÿ

1. ç±»å‹æç¤ºï¼šæ›´æ™ºèƒ½çš„æç¤º -> è‡ªåŠ¨æç¤º
2. ç¼–è¯‘æ—¶æŠ¥é”™ï¼šè¿˜æ²¡è¿è¡Œä»£ç å°±çŸ¥é“è‡ªå·±å†™é”™äº† -> ä¸¥è°¨
3. ç±»å‹æ£€æŸ¥ï¼šæ— æ³•ç‚¹å‡ºé”™è¯¯çš„å±æ€§ï¼Œå¦‚ä½ ä¸èƒ½éšä¾¿å†™ `this.xxx.yyy`

> åœ¨ Vue çš„ `template` é‡Œå†™çš„ JS ä»£ç ï¼ŒTS æ˜¯ä¸ä¼šå»æ£€æŸ¥çš„ï¼

8ï¼‰å…¶å®ƒè£…é¥°å™¨çš„ç”¨æ³•ï¼Ÿ

è‡ªå·±çœ‹ [æ–‡æ¡£](https://github.com/kaorun343/vue-property-decorator#Prop) -> CRM å­¦ä¹ æ³•ï¼ -> **å§‹ç»ˆè°¨è®°ã€Œå†™æ³•å½¢å¼ä¸Šæœ‰æ‰€ä¸åŒï¼Œä¸éœ€æ·±ç©¶ï¼Œä¾è‘«èŠ¦ç”»ç“¢ç›´æ¥ç”¨å³å¯ï¼ã€**

9ï¼‰å°ç»“

1. å®˜æ–¹çš„ `props` ä¸è¡Œï¼Œå°±ç”¨äº†ç¬¬ä¸‰æ–¹çš„ `@Prop`
2. ææ¸…æ¥šè¿™è¡Œ `@Prop(Number) xxx: number | undefined;` ä»£ç é‡Œè¾¹çš„ `Number` å’Œ `number` å„è‡ªä»£è¡¨ä»€ä¹ˆæ„æ€ï¼ -> å®ƒä»¬çš„é”™è¯¯å±•ç¤ºæ˜¯è¿™æ ·çš„ï¼šæµè§ˆå™¨æ§åˆ¶å° Errorï¼ˆè¿è¡Œæ—¶ï¼‰ vs ç»ˆç«¯ Errorï¼ˆç¼–è¯‘æ—¶ï¼‰

----

## â˜…TS çš„æœ¬è´¨

1ï¼‰TS çœŸå¾—å¾ˆéš¾å—ï¼Ÿ

TS çš„æœ¬è´¨ï¼š

![TS](assets/img/2020-09-01-10-25-34.png)

- TS çš„ç±»å‹ -> åŠŸèƒ½æ˜¯ã€Œæ£€æµ‹ä½ å†™çš„ JS ä»£ç å¯¹ä¸å¯¹ã€ï¼Œå¦‚`this.xxx.yyy`ï¼ŒTS å‘ç°`this.xxx`å¯èƒ½æ˜¯`undefined`ï¼Œå°±ä¸è®©ä½ å†™`.yyy`äº† -> ä¸ºå•¥ä¸è®©å†™ï¼Ÿ -> å› ä¸ºè¿™ä»£ç åœ¨è¿è¡Œæ—¶è‚¯å®šä¼šæŠ¥é”™çš„å‘€ï¼ä½ æƒ³æƒ³ `undefined.yyy`ï¼Ÿ
- TS æ£€æŸ¥åˆ†ä¸¤ç§æƒ…å†µï¼ˆè¿˜æœ‰å…¶å®ƒæƒ…å†µï¼Œè¿™é‡Œä¸»è¦ç®€å•æä¸€ä¸‹ç±»å‹çš„å˜åŒ–ï¼‰ï¼š
  - æœ‰é”™ -> ç¼–è¯‘æŠ¥é”™ -> æ ¹æ®ã€Œçˆ†çº¢ã€çš„çº¿å»æ”¹ä½ çš„ JS ä»£ç 
  - æ²¡æœ‰é”™ -> æŠŠç±»å‹ç»™åˆ äº†ï¼Œä¿ç•™åªå«æœ‰ JS ä»£ç çš„é‚£éƒ¨åˆ†ä»£ç  -> ç±»å‹ç”¨å®Œå°±åˆ ï¼
- TS ->ç¼–è¯‘ -> JS -> babel -> æ›´ä½çº§çš„ JS
- è°åœ¨åšæ£€æŸ¥ï¼Ÿ -> tscï¼ˆæ˜¯ä¸€ä¸ªç¨‹åºï¼ŒåŠŸèƒ½æ˜¯ã€Œæ£€æŸ¥+ç¼–è¯‘ã€ï¼Œä½ åœ¨å®‰è£…`typescript`çš„æ—¶å€™ä¼šé¡ºå¸¦æŠŠè¿™ä¸ªå·¥å…·ç»™å®‰è£…ä¸Šï¼‰ -> å¯¹äº†ï¼Œbabel ä¹Ÿå¯ä»¥åšç¼–è¯‘è¿™ä»¶äº‹å„¿ï¼ -> äºŒè€…éƒ½å­˜åœ¨ç‹¬ç‰¹çš„åŠŸèƒ½ï¼
- ç¼–è¯‘æŠ¥é”™ï¼Œä¹Ÿèƒ½æ­£å¸¸è¿è¡Œç¼–è¯‘è¿‡åçš„ JS ä»£ç  -> ä¸ºå•¥ä¼šè¿™æ ·å‘¢ï¼Ÿå¦‚æœä½ æœ‰ä¸€ä»½æœ‰ 100 è¡Œä»£ç çš„ JS æ–‡ä»¶ï¼Œä½ ç›´æ¥æ”¹æˆæ˜¯ `.ts` åç¼€ï¼Œç»“æœç¼–è¯‘æŠ¥äº†å‡ åå¤„é”™è¯¯ï¼Œéš¾é“æˆ‘ä»¬è¦ä¸€è¡Œè¡Œæ”¹å—ï¼Ÿ -> ä¸éœ€è¦æ”¹ï¼Œä½ ç›´æ¥æ‰”åˆ°æµè§ˆå™¨é‡Œè·‘ä¹Ÿæ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ï¼æ‰€ä»¥è¿™å°±æ˜¯ TS å®ƒç»™æˆ‘ä»¬çš„åŒ…å®¹æ€§â€¦â€¦

  ![ç¼–è¯‘æŠ¥é”™](assets/img/2020-09-01-13-21-09.png)

- å¯ä»¥çœ‹åˆ°ï¼ŒTS æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„ä¸œè¥¿ï¼ -> åƒä¸‡ä¸è¦è®¤ä¸ºå®ƒæœ‰å¤šä¹ˆçš„éš¾ï¼

2ï¼‰å¦‚ä½•é…ç½®åªè¦æœ‰ç¼–è¯‘é”™è¯¯ï¼Œå°±æ— æ³•å¾—åˆ°ç¼–è¯‘å‡ºæ¥çš„ JS æ–‡ä»¶ï¼Ÿ

å®˜ç½‘å›ç­”è¯´ï¼š

åœ¨`tsconfig.json`çš„`"compilerOptions"`é…ç½®`"noEmitOnError": true`å°±è¡Œäº†ï¼

ä½†æµ‹è¯•å‘ç°ï¼Œè¿™é…ç½®æ˜¯æ— æ•ˆçš„ï¼ŒTS è¿˜æ˜¯å¯ä»¥æŠŠä»£ç  ç¼–è¯‘æˆ JS

å½“ç„¶ï¼Œæˆ‘ä»¬å¹¶ä¸å…³å¿ƒè¿™ä¸ªé—®é¢˜æ˜¯å¦èƒ½è§£å†³ï¼Œå› ä¸ºè¿™åœ¨æˆ‘çœ‹æ¥ï¼Œè¿™æœ‰ç‚¹ç”»è›‡æ·»è¶³çš„æ„æ€äº†ï¼

3ï¼‰å°ç»“

- TS çš„æœ¬è´¨ï¼Œå°±æ˜¯åœ¨ JS ä¸Šå†™ä¸€äº› `: ç±»å‹`ï¼Œé€è¿‡ã€Œç±»å‹ã€ï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥æˆ‘ä»¬çš„ JS ä»£ç æ˜¯å¦æœ‰é”™ï¼Œè€Œæ£€æŸ¥çš„å®¶ä¼™æ˜¯`tsc`è¿™ä¸ªç¨‹åºï¼š
  - `tsc`æ£€æŸ¥é€šè¿‡ï¼Œå°±ä¼šæŠŠ TS ä»£ç ç¿»è¯‘æˆ JS ä»£ç ï¼Œå…¶ä¸­ç¿»è¯‘è¿‡ç¨‹ä¸­æœ€é‡è¦çš„ä¸€æ­¥å°±æ˜¯æŠŠå«æœ‰`: ç±»å‹`è¿™æ ·çš„ä»£ç ç»™åˆ æ‰ï¼Œæ¯•ç«Ÿ JS æœ¬èº«æ˜¯ä¸æ”¯æŒ `: ç±»å‹` è¿™ç§è¯­æ³•çš„ï¼ï¼ˆç¿»è¯‘å‡ºæ¥çš„ JS ä»£ç æ˜¯å¦è¿˜éœ€è¦ Babel å¤„ç†å‘¢ï¼Ÿä¸ä¸€å®šéœ€è¦å‘€ï¼å¯èƒ½ tsc å°±å†…åµŒäº†ç±»ä¼¼ Babel è¿™æ ·çš„åŠŸèƒ½ï¼Œç„¶åè‡ªèº«ä¹Ÿé¡ºä¾¿æŠŠ Babel çš„æ´»å„¿ä¹Ÿå¤„ç†äº†ï¼‰
  - `tsc`æ£€æŸ¥æŠ¥é”™ï¼Œè¿˜æ˜¯å¯ä»¥æŠŠ TS ä»£ç ç¿»è¯‘æˆ JS ä»£ç ï¼Œå³ç›´æ¥æŠŠ `: ç±»å‹`è¿™æ ·çš„ä»£ç ç»™åˆ äº†å°±è¡Œäº† -> ä¸€ç§**å¦¥å**åšæ³•ï¼

---

æ¥ä¸‹æ¥ï¼Œå°±æ¥çœ‹çœ‹ç›®å‰å†™ Vue å•æ–‡ä»¶ç»„ä»¶çš„å‡ ç§å§¿åŠ¿ï¼

## â˜…Vue å•æ–‡ä»¶ç»„ä»¶çš„ä¸‰ç§å†™æ³•

> åªé’ˆå¯¹ã€ŒVue å•æ–‡ä»¶ç»„ä»¶ã€ï¼Œå¯ä¸æ˜¯ç›´æ¥çš„åœ¨æŸä¸ª `new Vue({})`é‡Œè¾¹æ³¨å†Œä¸€ä¸ª Vue ç»„ä»¶æˆ–è€…å…¨å±€æ³¨å†Œä¸€ä¸ª Vue ç»„ä»¶ï¼Œå› ä¸ºè¿™ç§å§¿åŠ¿å¿’ low äº†ï¼

1ï¼‰ç”¨ JS å¯¹è±¡

``` js
export default { data, props, methods, created, ...}
```

2ï¼‰ç”¨ TS ç±» `<script lang="ts">`

``` ts
 @Component
 export default class XXX extends Vue{
     xxx: string = 'hi';
     @Prop(Number) xxx: number|undefined;
 }
```

3ï¼‰ç”¨ JS ç±» `<script lang="js">`

``` js
 @Component
 export default class XXX extends Vue{
     xxx = 'hi'
 }
```

> ä¹Ÿå¯ä»¥ç”¨ `class` å§¿åŠ¿æ¥å†™å•æ–‡ä»¶ç»„ä»¶ï¼

4ï¼‰ç”¨å“ªä¸ªï¼Ÿ

ä¼˜å…ˆä½¿ç”¨æœ€éš¾çš„ TS å§¿åŠ¿ï¼ -> å› ä¸ºä½¿ç”¨æœ€éš¾çš„ï¼Œä¼šå­¦åˆ°æ›´å¤šçš„çŸ¥è¯†ï¼

æœ€ç®€å•çš„å§¿åŠ¿æ˜¯ç”¨ã€Œç”¨ JS å¯¹è±¡ã€

æ³¨æ„ï¼šä½ ä½¿ç”¨äº† `class` ç»„ä»¶ï¼Œé‚£ä¹ˆä½ å°±å¾—å†™ä¸Š `@Component`ã€`extends Vue`

## â˜…numberPad æ¨¡å—

