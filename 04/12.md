### âœï¸ Tangxt â³ 2020-09-29 ğŸ·ï¸ vuex

# 12-Vue å…¨å±€æ•°æ®ç®¡ç†ï¼ˆä¸‹ï¼‰ä¹‹ Vuex

## â˜…Vuex åˆä½“éªŒ - æ•°æ®è¯»å†™

![å…¨å±€æ•°æ®ç®¡ç†](assets/img/2020-09-29-11-50-05.png)

1ï¼‰å®‰è£…

å®‰è£… `vuex` ï¼ˆåœ¨åˆ›å»ºé¡¹ç›®çš„æ—¶å€™æˆ‘ä»¬å·²ç»å®‰è£…äº†ï¼‰ï¼Œå¦‚æœæ²¡æœ‰é‚£å°± `npm` ä¸€ä¸‹å‘—ï¼

2ï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ

![æ˜¯ä»€ä¹ˆ](assets/img/2020-09-29-13-18-13.png)

æˆ‘ä»¬åœ¨å†™æ–‡ç« çš„æ—¶å€™ -> è®°ä½ä¸è¦ç”¨é‚£ä¹ˆå¤šæœ¯è¯­

è¯åˆè¯´å›æ¥ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ç†è§£ vuex æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

ç”¨ä¹‹å‰æˆ‘ä»¬å¼„å¾— `store` æ¥ç†è§£å®ƒ -> **ç”¨æ¥ç®¡ç†æ•°æ®çš„å·¥å…·**ï¼ -> ç®€å•æ¥è¯´ï¼Œå®ƒå°±æ˜¯ä¸ªå¯¹è±¡ï¼Œæä¾›äº†ä¸€äº› APIï¼Œè®©æˆ‘ä»¬å¯ä»¥è¯»æ•°æ®ï¼ˆæŸ¥ï¼‰å’Œå†™æ•°æ®ï¼ˆå¢åˆ æ”¹ï¼‰ï¼

æ€»ä¹‹ï¼Œæ‰€è°“ã€Œç®¡ç†ã€å°±æ˜¯ã€Œè¯»å†™ã€ï¼Œæ‰€è°“ã€ŒçŠ¶æ€ã€å°±æ˜¯ã€Œæ•°æ®ã€! -> ã€ŒçŠ¶æ€ç®¡ç†æ¨¡å¼ã€å³æ˜¯ã€Œ**æ•°æ®è¯»å†™å·¥å…·**ã€ï¼ˆå…³äºã€Œæ¨¡å¼ã€çš„è§£é‡Šï¼ŒèŠ³èŠ³ä¹Ÿä¸çŸ¥é“æ˜¯ä»€ä¹ˆæ„æ€â€¦â€¦ï¼‰

3ï¼‰æˆ‘ä»¬èƒ½å¦é€è¿‡å®˜æ–¹æä¾›çš„è§†é¢‘å­¦ä¼š vuex ï¼Ÿ

> [è§†é¢‘ 1](https://vuex.vuejs.org/)ã€[è§†é¢‘ 2](https://scrimba.com/scrim/cMPa2Uk?pl=pnyzgAP)

![vuex](assets/img/2020-09-29-13-37-31.png)

å¾ˆéš¾ -> å› ä¸ºå¯¹äºä¸­å›½äººè€Œè¨€ï¼Œå®ƒæ˜¯è‹±æ–‡æ•™å­¦çš„ -> æ‰€ä»¥æˆ‘ä»¬åªå¥½ç”¨ CRM å¤§æ³•çœ‹å®˜æ–¹æ–‡æ¡£å­¦ä¹ å®ƒäº†ï¼

> å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å­¦ä¸ä¼šæŸä¸ªä¸œè¥¿ï¼Œå¹¶ä¸æ˜¯å› ä¸ºæˆ‘ä»¬çš„æ™ºå•†é—®é¢˜ï¼Œè€Œæ˜¯å…¥é—¨æ•™ç¨‹å®åœ¨å¤ªè¾£é¸¡äº†ï¼

ä»£ç ï¼š[Demo](https://github.com/ppambler/vue-morney/commit/21d1cdfd44f2db7cdf6166d5b82313df9f8b392d)

ğŸ’¡ï¼š`store`å¯ä¸æ˜¯é‚£ä¸ªå‚æ•°`{}`ï¼Ÿ

![store](assets/img/2020-09-29-16-43-34.png)

æˆ‘ä»¬ä¼ çš„`state`æ˜¾ç„¶æ˜¯å¤åˆ¶åˆ°äº†`store`è¿™ä¸ªå®ä¾‹ä¸Šï¼ -> è·Ÿæˆ‘ä»¬ä¹‹å‰`...tagStore`ä¸€æ ·â€¦â€¦

ğŸ’¡ï¼šä½ ä»¥ä¸ºåœ¨`state`é‡Œè¾¹ä¸èƒ½å†™æ–¹æ³•å—ï¼Ÿ

![æ–¹æ³•ä¹Ÿå¯å†™](assets/img/2020-09-29-17-00-28.png)

ğŸ’¡ï¼šè¯»å†™çŠ¶æ€çš„æ“ä½œï¼Ÿ

- è¯»ï¼š`store.state.count`
- å†™ï¼šå¯¹æ•°æ®è¿›è¡Œæ”¹åŠ¨ï¼Œéœ€è¦åœ¨`mutations`ï¼ˆæ”¹åŠ¨ä¹‹æ„ï¼‰é‡Œè¾¹åšï¼

> `data`å³æ˜¯`state`ï¼Œ`methods`å³æ˜¯`mutations` -> Vue å¾ˆè´±ï¼Œæ€»æ˜¯å‘æ˜ä¸€äº›æ–°çš„å•è¯æ¥å¢åŠ æˆ‘ä»¬çš„è®°å¿†è´Ÿæ‹…ï¼ -> å…¶å®æ˜¯å»¶ç”¨äº†æŸäº›è®¾è®¡æ‰æå¾—è¿™äº›æ–°å•è¯ï¼

è¿›ä¸€æ­¥åˆ†æä¸€ä¸‹ã€Œå†™ã€ï¼š

![ä¸è¦ç”¨ this](assets/img/2020-09-29-17-05-29.png)

> `this`å¯èƒ½æ˜¯`window`

ä¸è¦ç”¨`this`å“ˆï¼Œå¦‚æœä½ ç”¨äº†ï¼Œé‚£ä¹Ÿæ˜¯ç™½ç”¨äº†ï¼ -> ä¼ ä¸ª`state`å½¢å‚ï¼Œç„¶å`state.count += 1`è¿™æ ·æ”¹ï¼

å¦‚ä½•è°ƒç”¨`increment`æ–¹æ³•ï¼Ÿ

æ˜¾ç„¶ä¸ä¼šç”¨è¿™ç§æ™ºéšœå§¿åŠ¿ï¼š

``` js
store.mutations.increment(store.state)
```

vuex ç»™æˆ‘ä»¬å°è£…äº†ä¸€ä¸ª APIï¼š

``` js
// ä¸éœ€è¦æˆ‘ä»¬è‡ªå·±ä¼  state å‚æ•°ï¼
store.commit('increment')
```

> è®½åˆºï¼šVuex ç»™äº†æˆ‘ä»¬éå¸¸å¤šçš„æ–°å•è¯ï¼Œä½†è¿™äº›å•è¯åªæ˜¯æ¢æ±¤ä¸æ¢è¯ï¼ -> æœ¬æ¥æ•°æ®å«`data`çš„ï¼Œç°åœ¨åˆ™æ˜¯å«`state`ï¼Œæœ¬æ¥æ”¹å˜æ•°æ®ç›´æ¥è°ƒç”¨`increment`å°±å¥½äº†ï¼Œä½†ç°åœ¨ä¸èƒ½ç›´æ¥è°ƒï¼Œè€Œæ˜¯é€è¿‡`commit`æäº¤ä¸€ä¸‹`'increment'`æ–¹æ³•åæ¥è°ƒï¼

ğŸ’¡ï¼švuex çœŸå¾—æ¯”æˆ‘ä»¬ä¹‹å‰å°è£…çš„`store`å¥½ç”¨å—ï¼Ÿ

![store](assets/img/2020-09-29-17-15-00.png)

æ²¡æœ‰å¥½ç”¨åˆ°å“ªå„¿å»ï¼ -> vuex æ”¹å˜äº†æˆ‘ä»¬æ“ä½œæ•°æ®çš„å§¿åŠ¿ï¼

ğŸ’¡ï¼šå¦‚ä½•ç»™`mutation`ä¼ å‚ï¼Ÿï¼ˆå¦‚ä½•ç»™æ”¹åŠ¨æ•°æ®çš„ API ä¼ å‚ï¼Ÿï¼‰

![ä¼ å‚](assets/img/2020-09-29-17-18-42.png)

æœ‰çš„æ—¶å€™ï¼Œå¦‚æœä½ ä»£ç å†™å¾—ä¸å¥½ï¼Œé‚£ä¹ˆä½ å°±å»å‘æ˜æ¦‚å¿µï¼Œä½ æ¦‚å¿µå‘æ˜å¥½äº†ï¼Œç„¶åå†™ä¸€äº›éå¸¸ç®€å•çš„åº“ï¼Œä¹Ÿå¯ä»¥è®©è¿™äº›ã€Œç®€å•çš„ã€åº“çœ‹èµ·æ¥å˜å¾—éå¸¸ç‰›é€¼ï¼

> æˆ‘å¾ˆèœï¼Œä½†æˆ‘å¯ä»¥æ£é¼“ä¸€äº›ä½ ä¸æ‡‚çš„æ¦‚å¿µï¼Œè®©æˆ‘çœ‹èµ·æ¥å¾ˆç‰›é€¼ï¼Œå¾ˆé«˜çº§ï¼

ğŸ’¡ï¼šå•ä¸€çŠ¶æ€æ ‘æ˜¯ä»€ä¹ˆï¼Ÿ

ç®€å•æ¥è¯´å°±æ˜¯å¯¹è±¡ï¼ˆåŒ…å«äº†å…¨éƒ¨çš„åº”ç”¨å±‚çº§çŠ¶æ€ï¼‰

``` js
{
  state: {
    count: 0,
    user: {
      name: 'frank',
      age: 18
    }
  }
}
```

æ‰€è°“çš„æ ‘ -> æ•°æ®çš„åµŒå¥—å±‚çº§å¾ˆæ·±ï¼Œçœ‹èµ·æ¥åƒæ˜¯ä¸€æ£µæ ‘ï¼

åº”ç”¨å±‚çº§çŠ¶æ€ -> åº”ç”¨å°±æ˜¯ã€Œä½ çš„è¿™ä¸ªé¡¹ç›®ã€ã€å±‚çº§å°±æ˜¯ã€Œä¸€å±‚å±‚çš„ç»„ä»¶ã€ï¼Œæ¯•ç«Ÿä¸€ä¸ªé¡¹ç›®æ˜¯ç”±å¾ˆå¤šä¸ªç»„ä»¶ç»„åˆè€Œæˆçš„ã€çŠ¶æ€å³ã€Œæ•°æ®ã€ -> åˆèµ·æ¥å°±æ˜¯ã€Œ**ä½ çš„é¡¹ç›®é‡Œè¾¹æ‰€æœ‰ç»„ä»¶çš„æ•°æ®**ã€ -> ä¸è¯´äººè¯çš„è§£é‡Šå°±æ˜¯ã€Œåº”ç”¨å±‚çº§çŠ¶æ€ã€

å”¯ä¸€æ•°æ®æº -> æˆ‘ä»¬æ•´ä¸ªåº”ç”¨æ²¡æœ‰ç¬¬äºŒä¸ªæ•°æ®ï¼Œé‚£å°±å«åšå”¯ä¸€æ•°æ®æºï¼

> ä¸ºäº†æƒå¨æ€§ï¼Œæ‰€ä»¥å¢åŠ äº†å¾ˆå¤šæœ¯è¯­ï¼Œä½†å…¶å®æ²¡å•¥ç”¨å‘€ï¼ -> çœŸæ­£å­¦ä¹ ç¼–ç¨‹ï¼Œä¸€å®šè¦äº†è§£è¿™ä¸ªä¸œè¥¿çš„æœ¬è´¨æ‰è¡Œï¼ -> `store`æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼

ğŸ’¡ï¼šå•ä¸€çŠ¶æ€æ ‘è®©æˆ‘ä»¬èƒ½å¤Ÿç›´æ¥åœ°å®šä½ä»»ä¸€ç‰¹å®šçš„çŠ¶æ€ç‰‡æ®µï¼Ÿ

æˆ‘ä»¬å¯ä»¥è·å–å…¨å±€å¯¹è±¡é‡Œè¾¹çš„ä»»æ„ä¸€ä¸ªæ•°æ®ç‰‡æ®µï¼Œå¦‚`count`ç­‰

ğŸ’¡ï¼šå•çŠ¶æ€æ ‘å’Œæ¨¡å—åŒ–å¹¶ä¸å†²çªï¼Ÿ

![æ¨¡å—åŒ–](assets/img/2020-09-29-19-13-19.png)

å°±æ˜¯åˆ†æ–‡ä»¶å‘—ï¼

ğŸ’¡ï¼šå¦‚ä½•åœ¨ç»„ä»¶ä¸­è·å–çŠ¶æ€ï¼Ÿ

éœ€è¦è®¡ç®—å±æ€§ -> è®¡ç®—å±æ€§å†™åœ¨`@Component`è¿™ä¸ªè£…é¥°å™¨é‡Œè¾¹ï¼

![computed](assets/img/2020-09-29-19-42-57.png)

å¦‚æœä½ åªæƒ³ç”¨ä¸€æ¬¡ï¼Œé‚£å°±ç”¨`data`å§¿åŠ¿å‘—ï¼ä½†å¤§éƒ¨åˆ†æƒ…å†µéƒ½ä¸æ­¢ç”¨ä¸€æ¬¡å“ˆï¼

æ€»ä¹‹ï¼Œ`count`ä¼šè®¡ç®—ä¾èµ– -> `store.state.count`å˜äº†ï¼Œé‚£ä¹ˆ`count`å°±ä¼šå˜ï¼

ğŸ’¡ï¼š`template`é‡Œè¾¹å¯ä»¥æ‹¿åˆ°`import`çš„`store`å—ï¼Ÿ

![ä¸èƒ½](assets/img/2020-09-29-19-48-51.png)

å¦‚ä½•è§£å†³ï¼Ÿ

å¾ˆç®€å•ï¼Œä½ æ”¹æˆæ˜¯ä¸€ä¸ªå‡½æ•°åä¸å°±è¡Œäº†ï¼š

![åšæ³•](assets/img/2020-09-29-19-50-10.png)

å¦ä¸€ç§è§£å†³å§¿åŠ¿ï¼š

![ä»£ç ](assets/img/2020-09-29-19-52-38.png)

`Vue.use(Vuex)`è¿™è¡Œä»£ç ï¼Œ`use`æ“ä½œä¼šå»è°ƒç”¨`Vuex`é‡Œè¾¹çš„ä¸€äº›ä¸œè¥¿ï¼Œè¿™äº›ä¸œè¥¿ä¼šåœ¨`Vue`çš„åŸå‹ä¸Šç»‘å®šä¸€äº›å…±ç”¨å±æ€§ï¼

`Vue.use(Vuex)`å°±æ˜¯åœ¨å®‰è£…è¿™ä¸ª`Vuex`æ’ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸º`Vue.prototype`æŒ‚è½½ä¸€ä¸ª`$store`å±æ€§ï¼ -> ä¹Ÿå°±æ˜¯æŠŠ `store` ç»™ç»‘å®šäº†ï¼š `Vue.prototype.$store = store`

å½“æˆ‘ä»¬ï¼š

``` js
new Vue({
  router,
  store,
  render: (h) => h(App),
}).$mount("#app");
```

è¿™æ ·åšæ—¶ï¼Œå°±æ˜¯ä¼ ä¸€ä¸ª`store`ç»™`$store`äº†ï¼

è¯è¯´ï¼Œä¸ºå•¥ä¸åœ¨`index.ts`é‡Œè¾¹ä¸€å¼€å§‹å°±ä¼ äº†ï¼Ÿè€Œæ˜¯è·‘å»`main.ts`é‡Œè¾¹ä¼ ï¼Ÿ -> å°±æ˜¯è¿™æ ·è®¾è®¡çš„ï¼å› ä¸ºç¬¦åˆåˆå§‹åŒ–è¯­æ³•å“ˆï¼ -> ç›¸å½“äºæ˜¯æ³¨å†Œäº†ï¼Œè¦åˆå§‹åŒ–æ‰èƒ½ä½¿ç”¨ï¼

æ‰€ä»¥å¦ä¸€ç§å§¿åŠ¿å°±è¿™æ ·è¿™æ ·ï¼š

![å¦ä¸€ç§å§¿åŠ¿](assets/img/2020-09-29-20-11-03.png)

ğŸ’¡ï¼šè®¡ç®—å±æ€§ä¸`data`åŒåï¼Œä½ çŒœ`template`é‡Œè¾¹ä¼šæ¸²æŸ“è°ï¼Ÿ

![data å…ˆåƒ](assets/img/2020-09-30-12-18-32.png)

``` js
'[Vue warn]: The computed property "recordList" is already defined in data.'
```

4ï¼‰å°ç»“

- è¯»çš„æ—¶å€™ç”¨`computed`æ¥è·å– -> `computed:{ count() { return this.$store.state.count } }`
- å†™çš„æ—¶å€™ç”¨`this.$store.commit`æˆ–è€…æ˜¯`this.store.commit`

ä½¿ç”¨`$store`ä¸éœ€è¦æˆ‘ä»¬`import` `store`

å¯¹æ¯”æˆ‘ä»¬ä¹‹å‰å†™çš„è‡ªå®šä¹‰`store`ï¼Œvuex å¹¶æ²¡æœ‰å¥½åœ¨å“ªé‡Œï¼Œè€Œä¸”å¾ˆä¸ç®€æ´ï¼ï¼ˆ**å¾ˆå¤æ‚**ï¼‰ -> ä¹Ÿæ¯”ä¸ä¸Šé‚£ç§`window`å§¿åŠ¿ï¼ -> æ˜æ˜ä½¿ç”¨ vuex æ²¡æœ‰å¥½å¤„ï¼Œä¸ºå•¥è¿˜è¦å­¦å‘¢ï¼Ÿ -> å› ä¸ºå¤§å®¶éƒ½åœ¨å­¦å‘—ï¼ -> å‰ç«¯çš„æ•´ä½“æ°´å¹³æœ‰å¾…æé«˜ï¼Œæ¯•ç«Ÿä»€ä¹ˆæ˜¯å¥½å¤„ï¼Œä»€ä¹ˆæ˜¯åå¤„ï¼Œä¸€ç‚¹æ·±åˆ»è®¤è¯†éƒ½æ²¡æœ‰ï¼

> æ‰¹åˆ¤ä¸€ä¸ªä¸œè¥¿å‰å…ˆå­¦ä¼šå®ƒï¼Œä¸ç„¶ï¼Œåˆ«äººæ˜¯ä¸ä¿¡ä½ æ‰€è¯´çš„ï¼

## â˜…åœ¨ Money.vue ä¸­ä½¿ç”¨ Vuex

> `action`æ˜¯ç”¨æ¥è°ƒç”¨`method`çš„ -> å¼‚æ­¥æ“ä½œï¼ -> æ—ºè´¢å‡çº§ç‰ˆä¼šç”¨åˆ°å®ƒï¼

1ï¼‰æ”¹ä»£ç 

1. åˆ æ‰æ‰€æœ‰`import` `index2` çš„ä»£ç ï¼ï¼ˆæˆ‘æ²¡æœ‰è¿™æ ·åšï¼Œæˆ‘æ˜¯ä¸€ä¸ªç»„ä»¶ä¸€ä¸ªç»„ä»¶è¿™æ ·æ…¢æ…¢æ”¹â€¦â€¦ï¼‰
2. å¤„ç†`fetchRecords` -> `createRecord` -> `saveRecords`

![çˆ†çº¢æ³¢æµªçº¿å¤„ç†](assets/img/2020-09-30-16-03-59.png)

ä»£ç ï¼š[Demo](https://github.com/ppambler/vue-morney/commit/c50e3b924afc9e15a5a6f8ada76812784b59551b)

ğŸ’¡ï¼šæ³¨é‡Šæ˜¯ç»™åˆå­¦è€…çœ‹çš„ï¼Œä½œä¸ºåŒè¡Œä¸éœ€è¦çœ‹ï¼Œæ‰€ä»¥æŠŠä»£ç é‡Œè¾¹å­˜åœ¨çš„æ³¨é‡Šéƒ½ç»™åˆ å’¯ï¼

ğŸ’¡ï¼šæ”¹ç”¨ vuexï¼Œé‚£ä¹ˆå°±æœ‰æ„å»å‰Šæ‰`methods`é‡Œè¾¹çš„`this`äº†

![state](assets/img/2020-09-30-12-35-39.png)

å¯ä»¥ç”¨`this`ï¼Œä½†å°±æ˜¯è®©ä½ ä¸è¦ç”¨ï¼

ğŸ’¡ï¼šæ”¹ä»£ç æ—¶ï¼Œæ­¥å­ä¸è¦è¿ˆå¾—å¤ªå¤§

å¦‚ï¼Œæ–¹æ–¹ä¸€å¼€å§‹å°±æŠŠæ‰€æœ‰çš„`import index2`éƒ½ç»™åˆ äº†ï¼ -> è¿™æ ·æ¯æ¬¡æµ‹è¯•æ˜¯å¦æŠŠä»£ç ä¿®æ”¹æˆåŠŸéƒ½ä¼šæŠ¥é”™ï¼

ğŸ’¡ï¼šå…³äºæ³¨é‡Šï¼š`// TODO`ï¼Ÿ

![todo](assets/img/2020-09-30-12-42-10.png)

`todo`æ„å‘³ç€ä½ ä¹‹åè¦å»ä¿®æ”¹ä»£ç çš„ï¼Œè€Œä¸”å¦‚æœé—æ¼äº† `todo` æ²¡æœ‰å®Œæˆï¼Œé‚£ä¹ˆåœ¨ä½ æäº¤ä»£ç æ—¶ï¼Œä¼šå‘Šè¯‰ä½ è¿™ä¸ªï¼š

![todo](assets/img/2020-09-30-15-50-56.png)

ä½ å¯ä»¥ `review` ä¸€ä¸‹çœ‹çœ‹æœ‰å“ªäº› `todo`ï¼Œä¹Ÿå¯ä»¥ä¸ç®¡æœªå®Œæˆçš„`todo`ï¼Œç›´æ¥ `commit`ã€‚

ğŸ’¡ï¼š`mutations`é‡Œè¾¹çš„æ–¹æ³•éƒ½æœ‰è¿”å›å€¼å—ï¼Ÿ

æ˜¯æ²¡æœ‰çš„ï¼Œç›´æ¥æ”¹`state`é‡Œè¾¹çš„æ•°æ®å°±è¡Œäº†ï¼

![è¿”å›å€¼](assets/img/2020-09-30-15-45-30.png)

## â˜…é‡æ„ Tags.vue å’Œ Labels.vue

1ï¼‰é‡æ„ Tags.vue

> å¾€`mutations`é‡Œè¾¹æ·»åŠ æ–¹æ³•  -> æ¯ä¸ªæ–¹æ³•æ€»æ˜¯éœ€è¦ä¼ `state`è¿™ä¸ªå½¢å‚ï¼

ä»£ç ï¼š[Demo](https://github.com/ppambler/vue-morney/commit/25d29fddb8f52dec451d6707a0f07c4e5e16308f)

å¦‚æœä¸€å¼€å§‹å°±ç”¨ Vuex ï¼Œé‚£å°±ä¸ç”¨æ”¹ä»£ç äº†ï¼Œä½†æ˜¯è¿™æ ·ä¸€æ¥ï¼Œå°±ä¸èƒ½æ›´å¥½åœ°ç†è§£ Vuex äº†ï¼

2ï¼‰é‡æ„ Labels.vue

ğŸ’¡ï¼šä¸€å®šè¦é‡å¤`fetch`ï¼Ÿ

`Tags.vue`éœ€è¦`fetch`ï¼Œ`Labels.vue`ä¹Ÿéœ€è¦`fetch` -> å› ä¸ºå¦‚æœåªæœ‰`Tags.vue`æœ‰`fetch`ï¼Œé‚£ä¹ˆä½ ç›´æ¥åˆ·æ–°`Labels.vue`æ˜¯æ‹¿ä¸åˆ°`TagList`çš„ï¼Œå› ä¸º`Tags.vue`è¿˜æ²¡æœ‰æ¸²æŸ“å‘¢ï¼Œä»¥è‡´äºå…¨å±€`state`è¿˜å’©æœ‰æ‹¿åˆ°å€¼â€¦â€¦

æ¯æ¬¡åˆ‡æ¢è·¯ç”±æ‰€å¯¹åº”çš„ç»„ä»¶éƒ½ä¼šé‡æ–°`fetch` -> ç‰ºç‰²ç‚¹æ€§èƒ½ï¼Œä¿è¯æ¯æ¬¡æ‹¿åˆ°çš„éƒ½æ˜¯æœ€æ–°çš„æ•°æ®ï¼

> æ¯æ¬¡åˆ‡æ¢è·¯ç”± -> æ„å‘³ç€åˆ‡æ¢ç»„ä»¶ -> æ„å‘³ç€æ¯æ¬¡éƒ½ä¼šæ‰§è¡Œ`created`é’©å­ï¼

ğŸ’¡ï¼šå‡ºç°ä¸¤æ¬¡ä¸€æ¨¡ä¸€æ ·çš„ä»£ç ï¼Ÿ

![é‡å¤ä¸¤æ¬¡](assets/img/2020-09-30-19-33-02.png)

ä»£ç é‡å¤å‡ºç°ä¸¤æ¬¡ï¼Œå¯ä¼˜åŒ–äº¦å¯ä¸ä¼˜åŒ–ï¼ -> å¦‚æœä¼˜åŒ–ï¼Œé‚£å°±ç”¨ `mixin` å‘—ï¼

## â˜…åœ¨ TS é‡Œä½¿ç”¨ mixinï¼ˆé‡æ–°ä¸Šä¼ ï¼‰

> `mixin`å¾ˆå¥½ç”¨ï¼Œå®ƒå¯ä»¥æŠŠå¤šä¸ªç»„ä»¶éƒ½ç”¨åˆ°çš„æ–¹æ³•æ”¶æ‹¢åˆ°ä¸€ä¸ªç»„ä»¶é‡Œè¾¹ -> éœ€è¦`mixin`çš„ç»„ä»¶`extends`ä¸€ä¸‹`mixins`å°±å¥½äº†ï¼

1ï¼‰ä½¿ç”¨ mixin

1. åˆ›å»º`/src/mixins/createTags.js` -> ä¸ºå•¥åŠ `s`ï¼Œå› ä¸º`src`ç›®å½•ä¸‹å¤§å¤šæœ‰å¤šä¸ªåŠ `s`çš„ç›®å½•ï¼Œç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬å¯èƒ½ä¸æ­¢ä¼šç”¨åˆ°ä¸€ä¸ª`mixin`
2. `mixins`æ˜¯ä¸ªå¯¹è±¡ï¼Œç›´æ¥å¯¼å‡ºå°±å¥½äº† -> ä¸ºå•¥ä¸æ˜¯`.ts`æ–‡ä»¶ï¼Ÿ -> å› ä¸ºæœ‰`this`ä¼šæŠ¥é”™ï¼è€Œç”¨`.js`åˆ™ä¸ä¼šæŠ¥é”™ï¼

ä»£ç ï¼š[Demo](https://github.com/ppambler/vue-morney/commit/ada4e2f6edff95ffe9734c796485f73f9e0e93d7)

ğŸ’¡ï¼šåå­—ä¿®æ”¹ï¼Ÿ

åœ¨ç»„ä»¶é‡Œè¾¹ä½¿ç”¨`mixin`æ—¶ï¼Œæˆ‘ä»¬å¯¼å…¥çš„æ˜¯è¿™ä¸ª`mixin`çš„æ–‡ä»¶å

![åå­—](assets/img/2020-09-30-19-57-20.png)

æˆ‘ä»¬æ”¹æˆæ˜¯`tagHelper.js`äº†ï¼Œå¦‚æœæ˜¯ç±»ï¼Œé‚£å°±æ˜¯å¤§å†™`TagHelper`ï¼Œè€Œå¯¹è±¡åˆ™æ˜¯å°å†™ï¼

ğŸ’¡ï¼šå¦‚ä½•ç¦ç”¨ Eslint å¯¹æŸä¸€è¡Œä»£ç æŠ¥é”™ï¼Ÿ

è‡ªå·±è°·æ­Œæœï¼ -> åœ¨ `ts` é‡Œè¾¹ä½¿ç”¨ `js`ï¼ŒEslint å¯èƒ½æ— æ³•é€šè¿‡ï¼

ğŸ’¡ï¼šåœ¨å†™ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°å¾€ `ts` é‡Œè¾¹ æ··å…¥ `js` ä»£ç ï¼Œæ˜¯å±é™©çš„æ“ä½œï¼Ÿ

ä¸€ä¸ª`js`æ–‡ä»¶ï¼Œä¼šæ±¡æŸ“æ•´ä¸ªç”¨ `ts` å†™çš„é¡¹ç›®ï¼

![js](assets/img/2020-09-30-20-01-57.png)

ä½†å¦‚æœæ”¹æˆ `ts`ï¼Œåˆå¾—æŠ¥é”™äº†ï¼š

![ts](assets/img/2020-09-30-20-03-59.png)

æˆ‘ä»¬ç”¨çš„ç±»ç»„ä»¶ï¼Œæ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹å·¥å…·çš„ï¼Œè€Œè¿™ä¸ªç¬¬ä¸‰æ–¹å·¥å…·ä¹Ÿæ˜¯ä¾èµ–å®˜æ–¹æ‰€æä¾›çš„`Vue Class Component`çš„ï¼Œåœ¨[å®˜ç½‘](https://class-component.vuejs.org/guide/extend-and-mixins.html#mixins)é‡Œè¾¹æˆ‘ä»¬æ‰¾åˆ°ã€Œå¦‚ä½•é…åˆ`ts`ä½¿ç”¨`mixin`ã€

è¿‡ç¨‹æŒºéº»çƒ¦çš„ -> ä½ é€‰æ‹©äº†ä½¿ç”¨ `ts`ï¼Œé‚£å°±ç›¸å½“äºé€‰æ‹©äº†ä¸€æ¡é«˜ç«¯ä¹‹è·¯ï¼

åšæ³• -> æŠŠ`mixin`å£°æ˜æˆç±»ç»„ä»¶ -> è¿™æ„å‘³æˆ‘ä»¬çš„æ–‡ä»¶åè¦æ”¹æˆå¤§å†™çš„`TagHelper`äº†ï¼

![åå­—](assets/img/2020-09-30-20-09-42.png)

> è¿™ä¸ªåå­—é—®é¢˜ -> å¦‚æœ`xxx`ç»„ä»¶ä¹Ÿæœ‰åŒä¸€ä¸ªå«`create`çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå°±ä¼šè¢«è¦†ç›–äº†ï¼

é¢˜å¤–è¯ï¼š

![mixin](assets/img/2020-09-30-20-14-05.png)

## â˜…é‡æ„ EditLabel.vue


